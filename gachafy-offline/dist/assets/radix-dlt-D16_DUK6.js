var zs=Object.defineProperty;var Hs=(e,t,n)=>t in e?zs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var po=(e,t,n)=>Hs(e,typeof t!="symbol"?t+"":t,n);import{g as Qo}from"./react-vendor-V67lxXmk.js";import{_ as kn,a as Gt,b as Dt,c as lt,d as Vs,e as ei,f as nr,g as Gs,h as Zs}from"./ui-vendor-zwV1FyKY.js";const Ks="modulepreload",Ys=function(e){return"/"+e},mo={},Xs=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),a=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(l=>{if(l=Ys(l),l in mo)return;mo[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":Ks,d||(y.as="script"),y.crossOrigin="",y.href=l,a&&y.setAttribute("nonce",a),document.head.appendChild(y),d)return new Promise((m,b)=>{y.addEventListener("load",m),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(u){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=u,window.dispatchEvent(a),!a.defaultPrevented)throw u}return o.then(u=>{for(const a of u||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};var he={},Hn={};Hn.byteLength=ea;Hn.toByteArray=na;Hn.fromByteArray=ia;var ct=[],$e=[],Js=typeof Uint8Array<"u"?Uint8Array:Array,rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $t=0,Qs=rr.length;$t<Qs;++$t)ct[$t]=rr[$t],$e[rr.charCodeAt($t)]=$t;$e[45]=62;$e[95]=63;function ti(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function ea(e){var t=ti(e),n=t[0],r=t[1];return(n+r)*3/4-r}function ta(e,t,n){return(t+n)*3/4-n}function na(e){var t,n=ti(e),r=n[0],o=n[1],i=new Js(ta(e,r,o)),u=0,a=o>0?r-4:r,l;for(l=0;l<a;l+=4)t=$e[e.charCodeAt(l)]<<18|$e[e.charCodeAt(l+1)]<<12|$e[e.charCodeAt(l+2)]<<6|$e[e.charCodeAt(l+3)],i[u++]=t>>16&255,i[u++]=t>>8&255,i[u++]=t&255;return o===2&&(t=$e[e.charCodeAt(l)]<<2|$e[e.charCodeAt(l+1)]>>4,i[u++]=t&255),o===1&&(t=$e[e.charCodeAt(l)]<<10|$e[e.charCodeAt(l+1)]<<4|$e[e.charCodeAt(l+2)]>>2,i[u++]=t>>8&255,i[u++]=t&255),i}function ra(e){return ct[e>>18&63]+ct[e>>12&63]+ct[e>>6&63]+ct[e&63]}function oa(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),o.push(ra(r));return o.join("")}function ia(e){for(var t,n=e.length,r=n%3,o=[],i=16383,u=0,a=n-r;u<a;u+=i)o.push(oa(e,u,u+i>a?a:u+i));return r===1?(t=e[n-1],o.push(ct[t>>2]+ct[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],o.push(ct[t>>10]+ct[t>>4&63]+ct[t<<2&63]+"=")),o.join("")}var Fr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Fr.read=function(e,t,n,r,o){var i,u,a=o*8-r-1,l=(1<<a)-1,d=l>>1,h=-7,y=n?o-1:0,m=n?-1:1,b=e[t+y];for(y+=m,i=b&(1<<-h)-1,b>>=-h,h+=a;h>0;i=i*256+e[t+y],y+=m,h-=8);for(u=i&(1<<-h)-1,i>>=-h,h+=r;h>0;u=u*256+e[t+y],y+=m,h-=8);if(i===0)i=1-d;else{if(i===l)return u?NaN:(b?-1:1)*(1/0);u=u+Math.pow(2,r),i=i-d}return(b?-1:1)*u*Math.pow(2,i-r)};Fr.write=function(e,t,n,r,o,i){var u,a,l,d=i*8-o-1,h=(1<<d)-1,y=h>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=r?0:i-1,w=r?1:-1,I=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,u=h):(u=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-u))<1&&(u--,l*=2),u+y>=1?t+=m/l:t+=m*Math.pow(2,1-y),t*l>=2&&(u++,l/=2),u+y>=h?(a=0,u=h):u+y>=1?(a=(t*l-1)*Math.pow(2,o),u=u+y):(a=t*Math.pow(2,y-1)*Math.pow(2,o),u=0));o>=8;e[n+b]=a&255,b+=w,a/=256,o-=8);for(u=u<<o|a,d+=o;d>0;e[n+b]=u&255,b+=w,u/=256,d-=8);e[n+b-w]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Hn,n=Fr,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=S,e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function u(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,a.prototype),s}function a(f,s,c){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(f)}return l(f,s,c)}a.poolSize=8192;function l(f,s,c){if(typeof f=="string")return m(f,s);if(ArrayBuffer.isView(f))return w(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(rt(f,ArrayBuffer)||f&&rt(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(rt(f,SharedArrayBuffer)||f&&rt(f.buffer,SharedArrayBuffer)))return I(f,s,c);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const p=f.valueOf&&f.valueOf();if(p!=null&&p!==f)return a.from(p,s,c);const g=A(f);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return a.from(f[Symbol.toPrimitive]("string"),s,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}a.from=function(f,s,c){return l(f,s,c)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function d(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function h(f,s,c){return d(f),f<=0?u(f):s!==void 0?typeof c=="string"?u(f).fill(s,c):u(f).fill(s):u(f)}a.alloc=function(f,s,c){return h(f,s,c)};function y(f){return d(f),u(f<0?0:v(f)|0)}a.allocUnsafe=function(f){return y(f)},a.allocUnsafeSlow=function(f){return y(f)};function m(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!a.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const c=B(f,s)|0;let p=u(c);const g=p.write(f,s);return g!==c&&(p=p.slice(0,g)),p}function b(f){const s=f.length<0?0:v(f.length)|0,c=u(s);for(let p=0;p<s;p+=1)c[p]=f[p]&255;return c}function w(f){if(rt(f,Uint8Array)){const s=new Uint8Array(f);return I(s.buffer,s.byteOffset,s.byteLength)}return b(f)}function I(f,s,c){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(c||0))throw new RangeError('"length" is outside of buffer bounds');let p;return s===void 0&&c===void 0?p=new Uint8Array(f):c===void 0?p=new Uint8Array(f,s):p=new Uint8Array(f,s,c),Object.setPrototypeOf(p,a.prototype),p}function A(f){if(a.isBuffer(f)){const s=v(f.length)|0,c=u(s);return c.length===0||f.copy(c,0,0,s),c}if(f.length!==void 0)return typeof f.length!="number"||tr(f.length)?u(0):b(f);if(f.type==="Buffer"&&Array.isArray(f.data))return b(f.data)}function v(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function S(f){return+f!=f&&(f=0),a.alloc(+f)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,c){if(rt(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),rt(c,Uint8Array)&&(c=a.from(c,c.offset,c.byteLength)),!a.isBuffer(s)||!a.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===c)return 0;let p=s.length,g=c.length;for(let E=0,T=Math.min(p,g);E<T;++E)if(s[E]!==c[E]){p=s[E],g=c[E];break}return p<g?-1:g<p?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,c){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);let p;if(c===void 0)for(c=0,p=0;p<s.length;++p)c+=s[p].length;const g=a.allocUnsafe(c);let E=0;for(p=0;p<s.length;++p){let T=s[p];if(rt(T,Uint8Array))E+T.length>g.length?(a.isBuffer(T)||(T=a.from(T)),T.copy(g,E)):Uint8Array.prototype.set.call(g,T,E);else if(a.isBuffer(T))T.copy(g,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=T.length}return g};function B(f,s){if(a.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||rt(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const c=f.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&c===0)return 0;let g=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return en(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return ho(f).length;default:if(g)return p?-1:en(f).length;s=(""+s).toLowerCase(),g=!0}}a.byteLength=B;function C(f,s,c){let p=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,s>>>=0,c<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return ce(this,s,c);case"utf8":case"utf-8":return $(this,s,c);case"ascii":return ae(this,s,c);case"latin1":case"binary":return ue(this,s,c);case"base64":return N(this,s,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,s,c);default:if(p)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),p=!0}}a.prototype._isBuffer=!0;function x(f,s,c){const p=f[s];f[s]=f[c],f[c]=p}a.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<s;c+=2)x(this,c,c+1);return this},a.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<s;c+=4)x(this,c,c+3),x(this,c+1,c+2);return this},a.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<s;c+=8)x(this,c,c+7),x(this,c+1,c+6),x(this,c+2,c+5),x(this,c+3,c+4);return this},a.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?$(this,0,s):C.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){let s="";const c=e.INSPECT_MAX_BYTES;return s=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(s+=" ... "),"<Buffer "+s+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(s,c,p,g,E){if(rt(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(c===void 0&&(c=0),p===void 0&&(p=s?s.length:0),g===void 0&&(g=0),E===void 0&&(E=this.length),c<0||p>s.length||g<0||E>this.length)throw new RangeError("out of range index");if(g>=E&&c>=p)return 0;if(g>=E)return-1;if(c>=p)return 1;if(c>>>=0,p>>>=0,g>>>=0,E>>>=0,this===s)return 0;let T=E-g,K=p-c;const le=Math.min(T,K),se=this.slice(g,E),fe=s.slice(c,p);for(let re=0;re<le;++re)if(se[re]!==fe[re]){T=se[re],K=fe[re];break}return T<K?-1:K<T?1:0};function _(f,s,c,p,g){if(f.length===0)return-1;if(typeof c=="string"?(p=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,tr(c)&&(c=g?0:f.length-1),c<0&&(c=f.length+c),c>=f.length){if(g)return-1;c=f.length-1}else if(c<0)if(g)c=0;else return-1;if(typeof s=="string"&&(s=a.from(s,p)),a.isBuffer(s))return s.length===0?-1:P(f,s,c,p,g);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(f,s,c):Uint8Array.prototype.lastIndexOf.call(f,s,c):P(f,[s],c,p,g);throw new TypeError("val must be string, number or Buffer")}function P(f,s,c,p,g){let E=1,T=f.length,K=s.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(f.length<2||s.length<2)return-1;E=2,T/=2,K/=2,c/=2}function le(fe,re){return E===1?fe[re]:fe.readUInt16BE(re*E)}let se;if(g){let fe=-1;for(se=c;se<T;se++)if(le(f,se)===le(s,fe===-1?0:se-fe)){if(fe===-1&&(fe=se),se-fe+1===K)return fe*E}else fe!==-1&&(se-=se-fe),fe=-1}else for(c+K>T&&(c=T-K),se=c;se>=0;se--){let fe=!0;for(let re=0;re<K;re++)if(le(f,se+re)!==le(s,re)){fe=!1;break}if(fe)return se}return-1}a.prototype.includes=function(s,c,p){return this.indexOf(s,c,p)!==-1},a.prototype.indexOf=function(s,c,p){return _(this,s,c,p,!0)},a.prototype.lastIndexOf=function(s,c,p){return _(this,s,c,p,!1)};function q(f,s,c,p){c=Number(c)||0;const g=f.length-c;p?(p=Number(p),p>g&&(p=g)):p=g;const E=s.length;p>E/2&&(p=E/2);let T;for(T=0;T<p;++T){const K=parseInt(s.substr(T*2,2),16);if(tr(K))return T;f[c+T]=K}return T}function R(f,s,c,p){return mn(en(s,f.length-c),f,c,p)}function L(f,s,c,p){return mn(fo(s),f,c,p)}function U(f,s,c,p){return mn(ho(s),f,c,p)}function V(f,s,c,p){return mn($s(s,f.length-c),f,c,p)}a.prototype.write=function(s,c,p,g){if(c===void 0)g="utf8",p=this.length,c=0;else if(p===void 0&&typeof c=="string")g=c,p=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(p)?(p=p>>>0,g===void 0&&(g="utf8")):(g=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const E=this.length-c;if((p===void 0||p>E)&&(p=E),s.length>0&&(p<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let T=!1;for(;;)switch(g){case"hex":return q(this,s,c,p);case"utf8":case"utf-8":return R(this,s,c,p);case"ascii":case"latin1":case"binary":return L(this,s,c,p);case"base64":return U(this,s,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,s,c,p);default:if(T)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),T=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function N(f,s,c){return s===0&&c===f.length?t.fromByteArray(f):t.fromByteArray(f.slice(s,c))}function $(f,s,c){c=Math.min(f.length,c);const p=[];let g=s;for(;g<c;){const E=f[g];let T=null,K=E>239?4:E>223?3:E>191?2:1;if(g+K<=c){let le,se,fe,re;switch(K){case 1:E<128&&(T=E);break;case 2:le=f[g+1],(le&192)===128&&(re=(E&31)<<6|le&63,re>127&&(T=re));break;case 3:le=f[g+1],se=f[g+2],(le&192)===128&&(se&192)===128&&(re=(E&15)<<12|(le&63)<<6|se&63,re>2047&&(re<55296||re>57343)&&(T=re));break;case 4:le=f[g+1],se=f[g+2],fe=f[g+3],(le&192)===128&&(se&192)===128&&(fe&192)===128&&(re=(E&15)<<18|(le&63)<<12|(se&63)<<6|fe&63,re>65535&&re<1114112&&(T=re))}}T===null?(T=65533,K=1):T>65535&&(T-=65536,p.push(T>>>10&1023|55296),T=56320|T&1023),p.push(T),g+=K}return ne(p)}const Y=4096;function ne(f){const s=f.length;if(s<=Y)return String.fromCharCode.apply(String,f);let c="",p=0;for(;p<s;)c+=String.fromCharCode.apply(String,f.slice(p,p+=Y));return c}function ae(f,s,c){let p="";c=Math.min(f.length,c);for(let g=s;g<c;++g)p+=String.fromCharCode(f[g]&127);return p}function ue(f,s,c){let p="";c=Math.min(f.length,c);for(let g=s;g<c;++g)p+=String.fromCharCode(f[g]);return p}function ce(f,s,c){const p=f.length;(!s||s<0)&&(s=0),(!c||c<0||c>p)&&(c=p);let g="";for(let E=s;E<c;++E)g+=Ws[f[E]];return g}function we(f,s,c){const p=f.slice(s,c);let g="";for(let E=0;E<p.length-1;E+=2)g+=String.fromCharCode(p[E]+p[E+1]*256);return g}a.prototype.slice=function(s,c){const p=this.length;s=~~s,c=c===void 0?p:~~c,s<0?(s+=p,s<0&&(s=0)):s>p&&(s=p),c<0?(c+=p,c<0&&(c=0)):c>p&&(c=p),c<s&&(c=s);const g=this.subarray(s,c);return Object.setPrototypeOf(g,a.prototype),g};function J(f,s,c){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>c)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,c,p){s=s>>>0,c=c>>>0,p||J(s,c,this.length);let g=this[s],E=1,T=0;for(;++T<c&&(E*=256);)g+=this[s+T]*E;return g},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,c,p){s=s>>>0,c=c>>>0,p||J(s,c,this.length);let g=this[s+--c],E=1;for(;c>0&&(E*=256);)g+=this[s+--c]*E;return g},a.prototype.readUint8=a.prototype.readUInt8=function(s,c){return s=s>>>0,c||J(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,c){return s=s>>>0,c||J(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,c){return s=s>>>0,c||J(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,c){return s=s>>>0,c||J(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,c){return s=s>>>0,c||J(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readBigUInt64LE=gt(function(s){s=s>>>0,oe(s,"offset");const c=this[s],p=this[s+7];(c===void 0||p===void 0)&&Be(s,this.length-8);const g=c+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,E=this[++s]+this[++s]*2**8+this[++s]*2**16+p*2**24;return BigInt(g)+(BigInt(E)<<BigInt(32))}),a.prototype.readBigUInt64BE=gt(function(s){s=s>>>0,oe(s,"offset");const c=this[s],p=this[s+7];(c===void 0||p===void 0)&&Be(s,this.length-8);const g=c*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],E=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+p;return(BigInt(g)<<BigInt(32))+BigInt(E)}),a.prototype.readIntLE=function(s,c,p){s=s>>>0,c=c>>>0,p||J(s,c,this.length);let g=this[s],E=1,T=0;for(;++T<c&&(E*=256);)g+=this[s+T]*E;return E*=128,g>=E&&(g-=Math.pow(2,8*c)),g},a.prototype.readIntBE=function(s,c,p){s=s>>>0,c=c>>>0,p||J(s,c,this.length);let g=c,E=1,T=this[s+--g];for(;g>0&&(E*=256);)T+=this[s+--g]*E;return E*=128,T>=E&&(T-=Math.pow(2,8*c)),T},a.prototype.readInt8=function(s,c){return s=s>>>0,c||J(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,c){s=s>>>0,c||J(s,2,this.length);const p=this[s]|this[s+1]<<8;return p&32768?p|4294901760:p},a.prototype.readInt16BE=function(s,c){s=s>>>0,c||J(s,2,this.length);const p=this[s+1]|this[s]<<8;return p&32768?p|4294901760:p},a.prototype.readInt32LE=function(s,c){return s=s>>>0,c||J(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,c){return s=s>>>0,c||J(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readBigInt64LE=gt(function(s){s=s>>>0,oe(s,"offset");const c=this[s],p=this[s+7];(c===void 0||p===void 0)&&Be(s,this.length-8);const g=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(p<<24);return(BigInt(g)<<BigInt(32))+BigInt(c+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),a.prototype.readBigInt64BE=gt(function(s){s=s>>>0,oe(s,"offset");const c=this[s],p=this[s+7];(c===void 0||p===void 0)&&Be(s,this.length-8);const g=(c<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(g)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+p)}),a.prototype.readFloatLE=function(s,c){return s=s>>>0,c||J(s,4,this.length),n.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,c){return s=s>>>0,c||J(s,4,this.length),n.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,c){return s=s>>>0,c||J(s,8,this.length),n.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,c){return s=s>>>0,c||J(s,8,this.length),n.read(this,s,!1,52,8)};function ie(f,s,c,p,g,E){if(!a.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>g||s<E)throw new RangeError('"value" argument is out of bounds');if(c+p>f.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,c,p,g){if(s=+s,c=c>>>0,p=p>>>0,!g){const K=Math.pow(2,8*p)-1;ie(this,s,c,p,K,0)}let E=1,T=0;for(this[c]=s&255;++T<p&&(E*=256);)this[c+T]=s/E&255;return c+p},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,c,p,g){if(s=+s,c=c>>>0,p=p>>>0,!g){const K=Math.pow(2,8*p)-1;ie(this,s,c,p,K,0)}let E=p-1,T=1;for(this[c+E]=s&255;--E>=0&&(T*=256);)this[c+E]=s/T&255;return c+p},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,1,255,0),this[c]=s&255,c+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,2,65535,0),this[c]=s&255,this[c+1]=s>>>8,c+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,2,65535,0),this[c]=s>>>8,this[c+1]=s&255,c+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,4,4294967295,0),this[c+3]=s>>>24,this[c+2]=s>>>16,this[c+1]=s>>>8,this[c]=s&255,c+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,4,4294967295,0),this[c]=s>>>24,this[c+1]=s>>>16,this[c+2]=s>>>8,this[c+3]=s&255,c+4};function Oe(f,s,c,p,g){ke(s,p,g,f,c,7);let E=Number(s&BigInt(4294967295));f[c++]=E,E=E>>8,f[c++]=E,E=E>>8,f[c++]=E,E=E>>8,f[c++]=E;let T=Number(s>>BigInt(32)&BigInt(4294967295));return f[c++]=T,T=T>>8,f[c++]=T,T=T>>8,f[c++]=T,T=T>>8,f[c++]=T,c}function Je(f,s,c,p,g){ke(s,p,g,f,c,7);let E=Number(s&BigInt(4294967295));f[c+7]=E,E=E>>8,f[c+6]=E,E=E>>8,f[c+5]=E,E=E>>8,f[c+4]=E;let T=Number(s>>BigInt(32)&BigInt(4294967295));return f[c+3]=T,T=T>>8,f[c+2]=T,T=T>>8,f[c+1]=T,T=T>>8,f[c]=T,c+8}a.prototype.writeBigUInt64LE=gt(function(s,c=0){return Oe(this,s,c,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=gt(function(s,c=0){return Je(this,s,c,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(s,c,p,g){if(s=+s,c=c>>>0,!g){const le=Math.pow(2,8*p-1);ie(this,s,c,p,le-1,-le)}let E=0,T=1,K=0;for(this[c]=s&255;++E<p&&(T*=256);)s<0&&K===0&&this[c+E-1]!==0&&(K=1),this[c+E]=(s/T>>0)-K&255;return c+p},a.prototype.writeIntBE=function(s,c,p,g){if(s=+s,c=c>>>0,!g){const le=Math.pow(2,8*p-1);ie(this,s,c,p,le-1,-le)}let E=p-1,T=1,K=0;for(this[c+E]=s&255;--E>=0&&(T*=256);)s<0&&K===0&&this[c+E+1]!==0&&(K=1),this[c+E]=(s/T>>0)-K&255;return c+p},a.prototype.writeInt8=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,1,127,-128),s<0&&(s=255+s+1),this[c]=s&255,c+1},a.prototype.writeInt16LE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,2,32767,-32768),this[c]=s&255,this[c+1]=s>>>8,c+2},a.prototype.writeInt16BE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,2,32767,-32768),this[c]=s>>>8,this[c+1]=s&255,c+2},a.prototype.writeInt32LE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,4,2147483647,-2147483648),this[c]=s&255,this[c+1]=s>>>8,this[c+2]=s>>>16,this[c+3]=s>>>24,c+4},a.prototype.writeInt32BE=function(s,c,p){return s=+s,c=c>>>0,p||ie(this,s,c,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[c]=s>>>24,this[c+1]=s>>>16,this[c+2]=s>>>8,this[c+3]=s&255,c+4},a.prototype.writeBigInt64LE=gt(function(s,c=0){return Oe(this,s,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=gt(function(s,c=0){return Je(this,s,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Qe(f,s,c,p,g,E){if(c+p>f.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function et(f,s,c,p,g){return s=+s,c=c>>>0,g||Qe(f,s,c,4),n.write(f,s,c,p,23,4),c+4}a.prototype.writeFloatLE=function(s,c,p){return et(this,s,c,!0,p)},a.prototype.writeFloatBE=function(s,c,p){return et(this,s,c,!1,p)};function tt(f,s,c,p,g){return s=+s,c=c>>>0,g||Qe(f,s,c,8),n.write(f,s,c,p,52,8),c+8}a.prototype.writeDoubleLE=function(s,c,p){return tt(this,s,c,!0,p)},a.prototype.writeDoubleBE=function(s,c,p){return tt(this,s,c,!1,p)},a.prototype.copy=function(s,c,p,g){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(p||(p=0),!g&&g!==0&&(g=this.length),c>=s.length&&(c=s.length),c||(c=0),g>0&&g<p&&(g=p),g===p||s.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),s.length-c<g-p&&(g=s.length-c+p);const E=g-p;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,p,g):Uint8Array.prototype.set.call(s,this.subarray(p,g),c),E},a.prototype.fill=function(s,c,p,g){if(typeof s=="string"){if(typeof c=="string"?(g=c,c=0,p=this.length):typeof p=="string"&&(g=p,p=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(s.length===1){const T=s.charCodeAt(0);(g==="utf8"&&T<128||g==="latin1")&&(s=T)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(c<0||this.length<c||this.length<p)throw new RangeError("Out of range index");if(p<=c)return this;c=c>>>0,p=p===void 0?this.length:p>>>0,s||(s=0);let E;if(typeof s=="number")for(E=c;E<p;++E)this[E]=s;else{const T=a.isBuffer(s)?s:a.from(s,g),K=T.length;if(K===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(E=0;E<p-c;++E)this[E+c]=T[E%K]}return this};const Me={};function M(f,s,c){Me[f]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}M("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),M("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),M("ERR_OUT_OF_RANGE",function(f,s,c){let p=`The value of "${f}" is out of range.`,g=c;return Number.isInteger(c)&&Math.abs(c)>2**32?g=k(String(c)):typeof c=="bigint"&&(g=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(g=k(g)),g+="n"),p+=` It must be ${s}. Received ${g}`,p},RangeError);function k(f){let s="",c=f.length;const p=f[0]==="-"?1:0;for(;c>=p+4;c-=3)s=`_${f.slice(c-3,c)}${s}`;return`${f.slice(0,c)}${s}`}function X(f,s,c){oe(s,"offset"),(f[s]===void 0||f[s+c]===void 0)&&Be(s,f.length-(c+1))}function ke(f,s,c,p,g,E){if(f>c||f<s){const T=typeof s=="bigint"?"n":"";let K;throw s===0||s===BigInt(0)?K=`>= 0${T} and < 2${T} ** ${(E+1)*8}${T}`:K=`>= -(2${T} ** ${(E+1)*8-1}${T}) and < 2 ** ${(E+1)*8-1}${T}`,new Me.ERR_OUT_OF_RANGE("value",K,f)}X(p,g,E)}function oe(f,s){if(typeof f!="number")throw new Me.ERR_INVALID_ARG_TYPE(s,"number",f)}function Be(f,s,c){throw Math.floor(f)!==f?(oe(f,c),new Me.ERR_OUT_OF_RANGE("offset","an integer",f)):s<0?new Me.ERR_BUFFER_OUT_OF_BOUNDS:new Me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${s}`,f)}const nt=/[^+/0-9A-Za-z-_]/g;function er(f){if(f=f.split("=")[0],f=f.trim().replace(nt,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function en(f,s){s=s||1/0;let c;const p=f.length;let g=null;const E=[];for(let T=0;T<p;++T){if(c=f.charCodeAt(T),c>55295&&c<57344){if(!g){if(c>56319){(s-=3)>-1&&E.push(239,191,189);continue}else if(T+1===p){(s-=3)>-1&&E.push(239,191,189);continue}g=c;continue}if(c<56320){(s-=3)>-1&&E.push(239,191,189),g=c;continue}c=(g-55296<<10|c-56320)+65536}else g&&(s-=3)>-1&&E.push(239,191,189);if(g=null,c<128){if((s-=1)<0)break;E.push(c)}else if(c<2048){if((s-=2)<0)break;E.push(c>>6|192,c&63|128)}else if(c<65536){if((s-=3)<0)break;E.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((s-=4)<0)break;E.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return E}function fo(f){const s=[];for(let c=0;c<f.length;++c)s.push(f.charCodeAt(c)&255);return s}function $s(f,s){let c,p,g;const E=[];for(let T=0;T<f.length&&!((s-=2)<0);++T)c=f.charCodeAt(T),p=c>>8,g=c%256,E.push(g),E.push(p);return E}function ho(f){return t.toByteArray(er(f))}function mn(f,s,c,p){let g;for(g=0;g<p&&!(g+c>=s.length||g>=f.length);++g)s[g+c]=f[g];return g}function rt(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function tr(f){return f!==f}const Ws=function(){const f="0123456789abcdef",s=new Array(256);for(let c=0;c<16;++c){const p=c*16;for(let g=0;g<16;++g)s[p+g]=f[c]+f[g]}return s}();function gt(f){return typeof BigInt>"u"?js:f}function js(){throw new Error("BigInt not supported")}})(he);function te(e){return typeof e=="function"}function Nr(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var or=Nr(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function qn(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var ze=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,o,i;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var a=kn(u),l=a.next();!l.done;l=a.next()){var d=l.value;d.remove(this)}}catch(I){t={error:I}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else u.remove(this);var h=this.initialTeardown;if(te(h))try{h()}catch(I){i=I instanceof or?I.errors:[I]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var m=kn(y),b=m.next();!b.done;b=m.next()){var w=b.value;try{yo(w)}catch(I){i=i??[],I instanceof or?i=Gt(Gt([],Dt(i)),Dt(I.errors)):i.push(I)}}}catch(I){r={error:I}}finally{try{b&&!b.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}}if(i)throw new or(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)yo(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&qn(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&qn(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),ni=ze.EMPTY;function ri(e){return e instanceof ze||e&&"closed"in e&&te(e.remove)&&te(e.add)&&te(e.unsubscribe)}function yo(e){te(e)?e():e.unsubscribe()}var oi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ii={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Gt([e,t],Dt(n)))},clearTimeout:function(e){var t=ii.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function si(e){ii.setTimeout(function(){throw e})}function Mn(){}function _n(e){e()}var $r=function(e){lt(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,ri(n)&&n.add(r)):r.destination=ua,r}return t.create=function(n,r,o){return new Zt(n,r,o)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(ze),sa=Function.prototype.bind;function ir(e,t){return sa.call(e,t)}var aa=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){yn(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){yn(r)}else yn(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){yn(n)}},e}(),Zt=function(e){lt(t,e);function t(n,r,o){var i=e.call(this)||this,u;if(te(n)||!n)u={next:n??void 0,error:r??void 0,complete:o??void 0};else{var a;i&&oi.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},u={next:n.next&&ir(n.next,a),error:n.error&&ir(n.error,a),complete:n.complete&&ir(n.complete,a)}):u=n}return i.destination=new aa(u),i}return t}($r);function yn(e){si(e)}function ca(e){throw e}var ua={closed:!0,next:Mn,error:ca,complete:Mn},Wr=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Vn(e){return e}function la(e){return e.length===0?Vn:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var Pe=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,i=da(t)?t:new Zt(t,n,r);return _n(function(){var u=o,a=u.operator,l=u.source;i.add(a?a.call(i,l):l?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=go(n),new n(function(o,i){var u=new Zt({next:function(a){try{t(a)}catch(l){i(l),u.unsubscribe()}},error:i,complete:o});r.subscribe(u)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Wr]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return la(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=go(t),new t(function(r,o){var i;n.subscribe(function(u){return i=u},function(u){return o(u)},function(){return r(i)})})},e.create=function(t){return new e(t)},e}();function go(e){var t;return(t=e??oi.Promise)!==null&&t!==void 0?t:Promise}function fa(e){return e&&te(e.next)&&te(e.error)&&te(e.complete)}function da(e){return e&&e instanceof $r||fa(e)&&ri(e)}function ha(e){return te(e==null?void 0:e.lift)}function Ne(e){return function(t){if(ha(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(e,t,n,r,o){return new pa(e,t,n,r,o)}var pa=function(e){lt(t,e);function t(n,r,o,i,u,a){var l=e.call(this,n)||this;return l.onFinalize=u,l.shouldUnsubscribe=a,l._next=r?function(d){try{r(d)}catch(h){n.error(h)}}:e.prototype._next,l._error=i?function(d){try{i(d)}catch(h){n.error(h)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=o?function(){try{o()}catch(d){n.error(d)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}($r),ma=Nr(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),pe=function(e){lt(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new bo(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new ma},t.prototype.next=function(n){var r=this;_n(function(){var o,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var u=kn(r.currentObservers),a=u.next();!a.done;a=u.next()){var l=a.value;l.next(n)}}catch(d){o={error:d}}finally{try{a&&!a.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}}})},t.prototype.error=function(n){var r=this;_n(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var o=r.observers;o.length;)o.shift().error(n)}})},t.prototype.complete=function(){var n=this;_n(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,o=this,i=o.hasError,u=o.isStopped,a=o.observers;return i||u?ni:(this.currentObservers=null,a.push(n),new ze(function(){r.currentObservers=null,qn(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,o=r.hasError,i=r.thrownError,u=r.isStopped;o?n.error(i):u&&n.complete()},t.prototype.asObservable=function(){var n=new Pe;return n.source=this,n},t.create=function(n,r){return new bo(n,r)},t}(Pe),bo=function(e){lt(t,e);function t(n,r){var o=e.call(this)||this;return o.destination=n,o.source=r,o}return t.prototype.next=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.next)===null||o===void 0||o.call(r,n)},t.prototype.error=function(n){var r,o;(o=(r=this.destination)===null||r===void 0?void 0:r.error)===null||o===void 0||o.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,o;return(o=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&o!==void 0?o:ni},t}(pe),Ie=function(e){lt(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,o=n.thrownError,i=n._value;if(r)throw o;return this._throwIfClosed(),i},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(pe),jr={now:function(){return(jr.delegate||Date).now()},delegate:void 0},ai=function(e){lt(t,e);function t(n,r,o){n===void 0&&(n=1/0),r===void 0&&(r=1/0),o===void 0&&(o=jr);var i=e.call(this)||this;return i._bufferSize=n,i._windowTime=r,i._timestampProvider=o,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=r===1/0,i._bufferSize=Math.max(1,n),i._windowTime=Math.max(1,r),i}return t.prototype.next=function(n){var r=this,o=r.isStopped,i=r._buffer,u=r._infiniteTimeWindow,a=r._timestampProvider,l=r._windowTime;o||(i.push(n),!u&&i.push(a.now()+l)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),o=this,i=o._infiniteTimeWindow,u=o._buffer,a=u.slice(),l=0;l<a.length&&!n.closed;l+=i?1:2)n.next(a[l]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,o=n._timestampProvider,i=n._buffer,u=n._infiniteTimeWindow,a=(u?1:2)*r;if(r<1/0&&a<i.length&&i.splice(0,i.length-a),!u){for(var l=o.now(),d=0,h=1;h<i.length&&i[h]<=l;h+=2)d=h;d&&i.splice(0,d+1)}},t}(pe),ya=function(e){lt(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(ze),wo={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Gt([e,t],Dt(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},ga=function(e){lt(t,e);function t(n,r){var o=e.call(this,n,r)||this;return o.scheduler=n,o.work=r,o.pending=!1,o}return t.prototype.schedule=function(n,r){var o;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var i=this.id,u=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(u,i,r)),this.pending=!0,this.delay=r,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(u,this.id,r),this},t.prototype.requestAsyncId=function(n,r,o){return o===void 0&&(o=0),wo.setInterval(n.flush.bind(n,this),o)},t.prototype.recycleAsyncId=function(n,r,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return r;r!=null&&wo.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(n,r);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var o=!1,i;try{this.work(n)}catch(u){o=!0,i=u||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,o=n.scheduler,i=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,qn(i,this),r!=null&&(this.id=this.recycleAsyncId(o,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(ya),vo=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=jr.now,e}(),ba=function(e){lt(t,e);function t(n,r){r===void 0&&(r=vo.now);var o=e.call(this,n,r)||this;return o.actions=[],o._active=!1,o}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var o;this._active=!0;do if(o=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,o){for(;n=r.shift();)n.unsubscribe();throw o}},t}(vo),ci=new ba(ga),wa=ci,ui=new Pe(function(e){return e.complete()});function li(e){return e&&te(e.schedule)}function fi(e){return e[e.length-1]}function di(e){return li(fi(e))?e.pop():void 0}function va(e,t){return typeof fi(e)=="number"?e.pop():t}var zr=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function hi(e){return te(e==null?void 0:e.then)}function pi(e){return te(e[Wr])}function mi(e){return Symbol.asyncIterator&&te(e==null?void 0:e[Symbol.asyncIterator])}function yi(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function xa(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var gi=xa();function bi(e){return te(e==null?void 0:e[gi])}function wi(e){return Vs(this,arguments,function(){var n,r,o,i;return ei(this,function(u){switch(u.label){case 0:n=e.getReader(),u.label=1;case 1:u.trys.push([1,,9,10]),u.label=2;case 2:return[4,nr(n.read())];case 3:return r=u.sent(),o=r.value,i=r.done,i?[4,nr(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,nr(o)];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function vi(e){return te(e==null?void 0:e.getReader)}function De(e){if(e instanceof Pe)return e;if(e!=null){if(pi(e))return Ia(e);if(zr(e))return Aa(e);if(hi(e))return Ea(e);if(mi(e))return xi(e);if(bi(e))return Sa(e);if(vi(e))return Ta(e)}throw yi(e)}function Ia(e){return new Pe(function(t){var n=e[Wr]();if(te(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Aa(e){return new Pe(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Ea(e){return new Pe(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,si)})}function Sa(e){return new Pe(function(t){var n,r;try{for(var o=kn(e),i=o.next();!i.done;i=o.next()){var u=i.value;if(t.next(u),t.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()})}function xi(e){return new Pe(function(t){Ba(e,t).catch(function(n){return t.error(n)})})}function Ta(e){return xi(wi(e))}function Ba(e,t){var n,r,o,i;return Gs(this,void 0,void 0,function(){var u,a;return ei(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Zs(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(u=r.value,t.next(u),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),o={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function qt(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function Ii(e,t){return t===void 0&&(t=0),Ne(function(n,r){n.subscribe(Le(r,function(o){return qt(r,e,function(){return r.next(o)},t)},function(){return qt(r,e,function(){return r.complete()},t)},function(o){return qt(r,e,function(){return r.error(o)},t)}))})}function Ai(e,t){return t===void 0&&(t=0),Ne(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function _a(e,t){return De(e).pipe(Ai(t),Ii(t))}function Ra(e,t){return De(e).pipe(Ai(t),Ii(t))}function Ca(e,t){return new Pe(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Pa(e,t){return new Pe(function(n){var r;return qt(n,t,function(){r=e[gi](),qt(n,t,function(){var o,i,u;try{o=r.next(),i=o.value,u=o.done}catch(a){n.error(a);return}u?n.complete():n.next(i)},0,!0)}),function(){return te(r==null?void 0:r.return)&&r.return()}})}function Ei(e,t){if(!e)throw new Error("Iterable cannot be null");return new Pe(function(n){qt(n,t,function(){var r=e[Symbol.asyncIterator]();qt(n,t,function(){r.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function ka(e,t){return Ei(wi(e),t)}function qa(e,t){if(e!=null){if(pi(e))return _a(e,t);if(zr(e))return Ca(e,t);if(hi(e))return Ra(e,t);if(mi(e))return Ei(e,t);if(bi(e))return Pa(e,t);if(vi(e))return ka(e,t)}throw yi(e)}function Un(e,t){return t?qa(e,t):De(e)}function Mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=di(e);return Un(e,n)}var Hr=Nr(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function Ut(e,t){return new Promise(function(n,r){var o=new Zt({next:function(i){n(i),o.unsubscribe()},error:r,complete:function(){r(new Hr)}});e.subscribe(o)})}function Ma(e){return e instanceof Date&&!isNaN(e)}function de(e,t){return Ne(function(n,r){var o=0;n.subscribe(Le(r,function(i){r.next(e.call(t,i,o++))}))})}var Ua=Array.isArray;function Da(e,t){return Ua(t)?e.apply(void 0,Gt([],Dt(t))):e(t)}function Oa(e){return de(function(t){return Da(e,t)})}function La(e,t,n,r,o,i,u,a){var l=[],d=0,h=0,y=!1,m=function(){y&&!l.length&&!d&&t.complete()},b=function(I){return d<r?w(I):l.push(I)},w=function(I){d++;var A=!1;De(n(I,h++)).subscribe(Le(t,function(v){t.next(v)},function(){A=!0},void 0,function(){if(A)try{d--;for(var v=function(){var S=l.shift();u||w(S)};l.length&&d<r;)v();m()}catch(S){t.error(S)}}))};return e.subscribe(Le(t,b,function(){y=!0,m()})),function(){}}function yt(e,t,n){return n===void 0&&(n=1/0),te(t)?yt(function(r,o){return de(function(i,u){return t(r,i,o,u)})(De(e(r,o)))},n):(typeof t=="number"&&(n=t),Ne(function(r,o){return La(r,o,e,n)}))}function Fa(e){return e===void 0&&(e=1/0),yt(Vn,e)}var Na=["addListener","removeListener"],$a=["addEventListener","removeEventListener"],Wa=["on","off"];function We(e,t,n,r){if(te(n)&&(r=n,n=void 0),r)return We(e,t,n).pipe(Oa(r));var o=Dt(Ha(e)?$a.map(function(a){return function(l){return e[a](t,l,n)}}):ja(e)?Na.map(xo(e,t)):za(e)?Wa.map(xo(e,t)):[],2),i=o[0],u=o[1];if(!i&&zr(e))return yt(function(a){return We(a,t,n)})(De(e));if(!i)throw new TypeError("Invalid event target");return new Pe(function(a){var l=function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return a.next(1<d.length?d:d[0])};return i(l),function(){return u(l)}})}function xo(e,t){return function(n){return function(r){return e[n](t,r)}}}function ja(e){return te(e.addListener)&&te(e.removeListener)}function za(e){return te(e.on)&&te(e.off)}function Ha(e){return te(e.addEventListener)&&te(e.removeEventListener)}function an(e,t,n){e===void 0&&(e=0),n===void 0&&(n=wa);var r=-1;return t!=null&&(li(t)?n=t:r=t),new Pe(function(o){var i=Ma(e)?+e-n.now():e;i<0&&(i=0);var u=0;return n.schedule(function(){o.closed||(o.next(u++),0<=r?this.schedule(void 0,r):o.complete())},i)})}function Ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=di(e),r=va(e,1/0),o=e;return o.length?o.length===1?De(o[0]):Fa(r)(Un(o,n)):ui}var Bt=new Pe(Mn),Va=Array.isArray;function Ga(e){return e.length===1&&Va(e[0])?e[0]:e}function ve(e,t){return Ne(function(n,r){var o=0;n.subscribe(Le(r,function(i){return e.call(t,i,o++)&&r.next(i)}))})}function Za(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=Ga(e),e.length===1?De(e[0]):new Pe(Ka(e))}function Ka(e){return function(t){for(var n=[],r=function(i){n.push(De(e[i]).subscribe(Le(t,function(u){if(n){for(var a=0;a<n.length;a++)a!==i&&n[a].unsubscribe();n=null}t.next(u)})))},o=0;n&&!t.closed&&o<e.length;o++)r(o)}}function Ya(e,t){return te(t)?yt(e,t,1):yt(e,1)}function Xa(e){return Ne(function(t,n){var r=!1;t.subscribe(Le(n,function(o){r=!0,n.next(o)},function(){r||n.next(e),n.complete()}))})}function Si(e){return e<=0?function(){return ui}:Ne(function(t,n){var r=0;t.subscribe(Le(n,function(o){++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function Ja(e){return de(function(){return e})}function Qa(e,t){return yt(function(n,r){return De(e(n,r)).pipe(Si(1),Ja(n))})}function ec(e,t){t===void 0&&(t=ci);var n=an(e,t);return Qa(function(){return n})}function tc(e){return e===void 0&&(e=nc),Ne(function(t,n){var r=!1;t.subscribe(Le(n,function(o){r=!0,n.next(o)},function(){return r?n.complete():n.error(e())}))})}function nc(){return new Hr}function rc(e){return Ne(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function Dn(e,t){var n=arguments.length>=2;return function(r){return r.pipe(Vn,Si(1),n?Xa(t):tc(function(){return new Hr}))}}function Ti(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new pe}:t,r=e.resetOnError,o=r===void 0?!0:r,i=e.resetOnComplete,u=i===void 0?!0:i,a=e.resetOnRefCountZero,l=a===void 0?!0:a;return function(d){var h,y,m,b=0,w=!1,I=!1,A=function(){y==null||y.unsubscribe(),y=void 0},v=function(){A(),h=m=void 0,w=I=!1},S=function(){var B=h;v(),B==null||B.unsubscribe()};return Ne(function(B,C){b++,!I&&!w&&A();var x=m=m??n();C.add(function(){b--,b===0&&!I&&!w&&(y=sr(S,l))}),x.subscribe(C),!h&&b>0&&(h=new Zt({next:function(_){return x.next(_)},error:function(_){I=!0,A(),y=sr(v,o,_),x.error(_)},complete:function(){w=!0,A(),y=sr(v,u),x.complete()}}),De(B).subscribe(h))})(d)}}function sr(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var o=new Zt({next:function(){o.unsubscribe(),e()}});return De(t.apply(void 0,Gt([],Dt(n)))).subscribe(o)}}function oc(e,t,n){var r,o=!1;return r=e,Ti({connector:function(){return new ai(r,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Ye(e,t){return Ne(function(n,r){var o=null,i=0,u=!1,a=function(){return u&&!o&&r.complete()};n.subscribe(Le(r,function(l){o==null||o.unsubscribe();var d=0,h=i++;De(e(l,h)).subscribe(o=Le(r,function(y){return r.next(t?t(l,y,h,d++):y)},function(){o=null,a()}))},function(){u=!0,a()}))})}function ic(e){return Ne(function(t,n){De(e).subscribe(Le(n,function(){return n.complete()},Mn)),!n.closed&&t.subscribe(n)})}function Z(e,t,n){var r=te(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ne(function(o,i){var u;(u=r.subscribe)===null||u===void 0||u.call(r);var a=!0;o.subscribe(Le(i,function(l){var d;(d=r.next)===null||d===void 0||d.call(r,l),i.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},function(l){var d;a=!1,(d=r.error)===null||d===void 0||d.call(r,l),i.error(l)},function(){var l,d;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(d=r.finalize)===null||d===void 0||d.call(r)}))}):Vn}const Wt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Gn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function sc(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Nt(e,...t){if(!Gn(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Io(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ac(e,t){Nt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Er(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ar(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}const Bi=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",cc=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Vr(e){if(Nt(e),Bi)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=cc[e[n]];return t}const ft={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ao(e){if(e>=ft._0&&e<=ft._9)return e-ft._0;if(e>=ft.A&&e<=ft.F)return e-(ft.A-10);if(e>=ft.a&&e<=ft.f)return e-(ft.a-10)}function _i(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Bi)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let o=0,i=0;o<n;o++,i+=2){const u=Ao(e.charCodeAt(i)),a=Ao(e.charCodeAt(i+1));if(u===void 0||a===void 0){const l=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+i)}r[o]=u*16+a}return r}function uc(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ri(e){return typeof e=="string"&&(e=uc(e)),Nt(e),e}function Eo(...e){let t=0;for(let r=0;r<e.length;r++){const o=e[r];Nt(o),t+=o.length}const n=new Uint8Array(t);for(let r=0,o=0;r<e.length;r++){const i=e[r];n.set(i,o),o+=i.length}return n}let lc=class{};function fc(e){const t=r=>e().update(Ri(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Ci(e=32){if(Wt&&typeof Wt.getRandomValues=="function")return Wt.getRandomValues(new Uint8Array(e));if(Wt&&typeof Wt.randomBytes=="function")return Uint8Array.from(Wt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function dc(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),u=Number(n>>o&i),a=Number(n&i),l=r?4:0,d=r?0:4;e.setUint32(t+l,u,r),e.setUint32(t+d,a,r)}let hc=class extends lc{constructor(t,n,r,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=o,this.buffer=new Uint8Array(t),this.view=ar(this.buffer)}update(t){Io(this),t=Ri(t),Nt(t);const{view:n,buffer:r,blockLen:o}=this,i=t.length;for(let u=0;u<i;){const a=Math.min(o-this.pos,i-u);if(a===o){const l=ar(t);for(;o<=i-u;u+=o)this.process(l,u);continue}r.set(t.subarray(u,u+a),this.pos),this.pos+=a,u+=a,this.pos===o&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Io(this),ac(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:o,isLE:i}=this;let{pos:u}=this;n[u++]=128,Er(this.buffer.subarray(u)),this.padOffset>o-u&&(this.process(r,0),u=0);for(let y=u;y<o;y++)n[y]=0;dc(r,o-8,BigInt(this.length*8),i),this.process(r,0);const a=ar(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=l/4,h=this.get();if(d>h.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<d;y++)a.setUint32(4*y,h[y],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:o,finished:i,destroyed:u,pos:a}=this;return t.destroyed=u,t.finished=i,t.length=o,t.pos=a,o%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const _e=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),gn=BigInt(2**32-1),So=BigInt(32);function pc(e,t=!1){return t?{h:Number(e&gn),l:Number(e>>So&gn)}:{h:Number(e>>So&gn)|0,l:Number(e&gn)|0}}function mc(e,t=!1){const n=e.length;let r=new Uint32Array(n),o=new Uint32Array(n);for(let i=0;i<n;i++){const{h:u,l:a}=pc(e[i],t);[r[i],o[i]]=[u,a]}return[r,o]}const To=(e,t,n)=>e>>>n,Bo=(e,t,n)=>e<<32-n|t>>>n,jt=(e,t,n)=>e>>>n|t<<32-n,zt=(e,t,n)=>e<<32-n|t>>>n,bn=(e,t,n)=>e<<64-n|t>>>n-32,wn=(e,t,n)=>e>>>n-32|t<<64-n;function dt(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:o|0}}const yc=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),gc=(e,t,n,r)=>t+n+r+(e/2**32|0)|0,bc=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),wc=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0,vc=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0),xc=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0,Pi=mc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),Ic=Pi[0],Ac=Pi[1],bt=new Uint32Array(80),wt=new Uint32Array(80);class Ec extends hc{constructor(t=64){super(128,t,16,!1),this.Ah=_e[0]|0,this.Al=_e[1]|0,this.Bh=_e[2]|0,this.Bl=_e[3]|0,this.Ch=_e[4]|0,this.Cl=_e[5]|0,this.Dh=_e[6]|0,this.Dl=_e[7]|0,this.Eh=_e[8]|0,this.El=_e[9]|0,this.Fh=_e[10]|0,this.Fl=_e[11]|0,this.Gh=_e[12]|0,this.Gl=_e[13]|0,this.Hh=_e[14]|0,this.Hl=_e[15]|0}get(){const{Ah:t,Al:n,Bh:r,Bl:o,Ch:i,Cl:u,Dh:a,Dl:l,Eh:d,El:h,Fh:y,Fl:m,Gh:b,Gl:w,Hh:I,Hl:A}=this;return[t,n,r,o,i,u,a,l,d,h,y,m,b,w,I,A]}set(t,n,r,o,i,u,a,l,d,h,y,m,b,w,I,A){this.Ah=t|0,this.Al=n|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=u|0,this.Dh=a|0,this.Dl=l|0,this.Eh=d|0,this.El=h|0,this.Fh=y|0,this.Fl=m|0,this.Gh=b|0,this.Gl=w|0,this.Hh=I|0,this.Hl=A|0}process(t,n){for(let B=0;B<16;B++,n+=4)bt[B]=t.getUint32(n),wt[B]=t.getUint32(n+=4);for(let B=16;B<80;B++){const C=bt[B-15]|0,x=wt[B-15]|0,_=jt(C,x,1)^jt(C,x,8)^To(C,x,7),P=zt(C,x,1)^zt(C,x,8)^Bo(C,x,7),q=bt[B-2]|0,R=wt[B-2]|0,L=jt(q,R,19)^bn(q,R,61)^To(q,R,6),U=zt(q,R,19)^wn(q,R,61)^Bo(q,R,6),V=bc(P,U,wt[B-7],wt[B-16]),N=wc(V,_,L,bt[B-7],bt[B-16]);bt[B]=N|0,wt[B]=V|0}let{Ah:r,Al:o,Bh:i,Bl:u,Ch:a,Cl:l,Dh:d,Dl:h,Eh:y,El:m,Fh:b,Fl:w,Gh:I,Gl:A,Hh:v,Hl:S}=this;for(let B=0;B<80;B++){const C=jt(y,m,14)^jt(y,m,18)^bn(y,m,41),x=zt(y,m,14)^zt(y,m,18)^wn(y,m,41),_=y&b^~y&I,P=m&w^~m&A,q=vc(S,x,P,Ac[B],wt[B]),R=xc(q,v,C,_,Ic[B],bt[B]),L=q|0,U=jt(r,o,28)^bn(r,o,34)^bn(r,o,39),V=zt(r,o,28)^wn(r,o,34)^wn(r,o,39),N=r&i^r&a^i&a,$=o&u^o&l^u&l;v=I|0,S=A|0,I=b|0,A=w|0,b=y|0,w=m|0,{h:y,l:m}=dt(d|0,h|0,R|0,L|0),d=a|0,h=l|0,a=i|0,l=u|0,i=r|0,u=o|0;const Y=yc(L,V,$);r=gc(Y,R,U,N),o=Y|0}({h:r,l:o}=dt(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:u}=dt(this.Bh|0,this.Bl|0,i|0,u|0),{h:a,l}=dt(this.Ch|0,this.Cl|0,a|0,l|0),{h:d,l:h}=dt(this.Dh|0,this.Dl|0,d|0,h|0),{h:y,l:m}=dt(this.Eh|0,this.El|0,y|0,m|0),{h:b,l:w}=dt(this.Fh|0,this.Fl|0,b|0,w|0),{h:I,l:A}=dt(this.Gh|0,this.Gl|0,I|0,A|0),{h:v,l:S}=dt(this.Hh|0,this.Hl|0,v|0,S|0),this.set(r,o,i,u,a,l,d,h,y,m,b,w,I,A,v,S)}roundClean(){Er(bt,wt)}destroy(){Er(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Sc=fc(()=>new Ec);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gr=BigInt(0),Sr=BigInt(1);function Tr(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Rn(e,t,n=""){const r=Gn(e),o=e==null?void 0:e.length,i=t!==void 0;if(!r||i&&o!==t){const u=n&&`"${n}" `,a=i?` of length ${t}`:"",l=r?`length=${o}`:`type=${typeof e}`;throw new Error(u+"expected Uint8Array"+a+", got "+l)}return e}function ki(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Gr:BigInt("0x"+e)}function Tc(e){return ki(Vr(e))}function Kt(e){return Nt(e),ki(Vr(Uint8Array.from(e).reverse()))}function qi(e,t){return _i(e.toString(16).padStart(t*2,"0"))}function Mi(e,t){return qi(e,t).reverse()}function it(e,t,n){let r;if(typeof t=="string")try{r=_i(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else if(Gn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const o=r.length;if(typeof n=="number"&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r}function _o(e){return Uint8Array.from(e)}const cr=e=>typeof e=="bigint"&&Gr<=e;function Bc(e,t,n){return cr(e)&&cr(t)&&cr(n)&&t<=e&&e<n}function On(e,t,n,r){if(!Bc(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function _c(e){let t;for(t=0;e>Gr;e>>=Sr,t+=1);return t}const Zr=e=>(Sr<<BigInt(e))-Sr;function Zn(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(o,i,u){const a=e[o];if(u&&a===void 0)return;const l=typeof a;if(l!==i||a===null)throw new Error(`param "${o}" is invalid: expected ${i}, got ${l}`)}Object.entries(t).forEach(([o,i])=>r(o,i,!1)),Object.entries(n).forEach(([o,i])=>r(o,i,!0))}function Ro(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(o!==void 0)return o;const i=e(n,...r);return t.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ue=BigInt(0),qe=BigInt(1),kt=BigInt(2),Ui=BigInt(3),Di=BigInt(4),Oi=BigInt(5),Rc=BigInt(7),Li=BigInt(8),Cc=BigInt(9),Fi=BigInt(16);function me(e,t){const n=e%t;return n>=Ue?n:t+n}function He(e,t,n){let r=e;for(;t-- >Ue;)r*=r,r%=n;return r}function Co(e,t){if(e===Ue)throw new Error("invert: expected non-zero number");if(t<=Ue)throw new Error("invert: expected positive modulus, got "+t);let n=me(e,t),r=t,o=Ue,i=qe;for(;n!==Ue;){const a=r/n,l=r%n,d=o-i*a;r=n,n=l,o=i,i=d}if(r!==qe)throw new Error("invert: does not exist");return me(o,t)}function Kr(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function Ni(e,t){const n=(e.ORDER+qe)/Di,r=e.pow(t,n);return Kr(e,r,t),r}function Pc(e,t){const n=(e.ORDER-Oi)/Li,r=e.mul(t,kt),o=e.pow(r,n),i=e.mul(t,o),u=e.mul(e.mul(i,kt),o),a=e.mul(i,e.sub(u,e.ONE));return Kr(e,a,t),a}function kc(e){const t=dn(e),n=$i(e),r=n(t,t.neg(t.ONE)),o=n(t,r),i=n(t,t.neg(r)),u=(e+Rc)/Fi;return(a,l)=>{let d=a.pow(l,u),h=a.mul(d,r);const y=a.mul(d,o),m=a.mul(d,i),b=a.eql(a.sqr(h),l),w=a.eql(a.sqr(y),l);d=a.cmov(d,h,b),h=a.cmov(m,y,w);const I=a.eql(a.sqr(h),l),A=a.cmov(d,h,I);return Kr(a,A,l),A}}function $i(e){if(e<Ui)throw new Error("sqrt is not defined for small field");let t=e-qe,n=0;for(;t%kt===Ue;)t/=kt,n++;let r=kt;const o=dn(e);for(;Po(o,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return Ni;let i=o.pow(r,t);const u=(t+qe)/kt;return function(l,d){if(l.is0(d))return d;if(Po(l,d)!==1)throw new Error("Cannot find square root");let h=n,y=l.mul(l.ONE,i),m=l.pow(d,t),b=l.pow(d,u);for(;!l.eql(m,l.ONE);){if(l.is0(m))return l.ZERO;let w=1,I=l.sqr(m);for(;!l.eql(I,l.ONE);)if(w++,I=l.sqr(I),w===h)throw new Error("Cannot find square root");const A=qe<<BigInt(h-w-1),v=l.pow(y,A);h=w,y=l.sqr(v),m=l.mul(m,y),b=l.mul(b,v)}return b}}function qc(e){return e%Di===Ui?Ni:e%Li===Oi?Pc:e%Fi===Cc?kc(e):$i(e)}const Mc=(e,t)=>(me(e,t)&qe)===qe,Uc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Dc(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Uc.reduce((r,o)=>(r[o]="function",r),t);return Zn(e,n),e}function Oc(e,t,n){if(n<Ue)throw new Error("invalid exponent, negatives unsupported");if(n===Ue)return e.ONE;if(n===qe)return t;let r=e.ONE,o=t;for(;n>Ue;)n&qe&&(r=e.mul(r,o)),o=e.sqr(o),n>>=qe;return r}function Wi(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),o=t.reduce((u,a,l)=>e.is0(a)?u:(r[l]=u,e.mul(u,a)),e.ONE),i=e.inv(o);return t.reduceRight((u,a,l)=>e.is0(a)?u:(r[l]=e.mul(u,r[l]),e.mul(u,a)),i),r}function Po(e,t){const n=(e.ORDER-qe)/kt,r=e.pow(t,n),o=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),u=e.eql(r,e.neg(e.ONE));if(!o&&!i&&!u)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function Lc(e,t){t!==void 0&&sc(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function dn(e,t,n=!1,r={}){if(e<=Ue)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,i,u=!1,a;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const m=t;m.BITS&&(o=m.BITS),m.sqrt&&(i=m.sqrt),typeof m.isLE=="boolean"&&(n=m.isLE),typeof m.modFromBytes=="boolean"&&(u=m.modFromBytes),a=m.allowedLengths}else typeof t=="number"&&(o=t),r.sqrt&&(i=r.sqrt);const{nBitLength:l,nByteLength:d}=Lc(e,o);if(d>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let h;const y=Object.freeze({ORDER:e,isLE:n,BITS:l,BYTES:d,MASK:Zr(l),ZERO:Ue,ONE:qe,allowedLengths:a,create:m=>me(m,e),isValid:m=>{if(typeof m!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof m);return Ue<=m&&m<e},is0:m=>m===Ue,isValidNot0:m=>!y.is0(m)&&y.isValid(m),isOdd:m=>(m&qe)===qe,neg:m=>me(-m,e),eql:(m,b)=>m===b,sqr:m=>me(m*m,e),add:(m,b)=>me(m+b,e),sub:(m,b)=>me(m-b,e),mul:(m,b)=>me(m*b,e),pow:(m,b)=>Oc(y,m,b),div:(m,b)=>me(m*Co(b,e),e),sqrN:m=>m*m,addN:(m,b)=>m+b,subN:(m,b)=>m-b,mulN:(m,b)=>m*b,inv:m=>Co(m,e),sqrt:i||(m=>(h||(h=qc(e)),h(y,m))),toBytes:m=>n?Mi(m,d):qi(m,d),fromBytes:(m,b=!0)=>{if(a){if(!a.includes(m.length)||m.length>d)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+m.length);const I=new Uint8Array(d);I.set(m,n?0:I.length-m.length),m=I}if(m.length!==d)throw new Error("Field.fromBytes: expected "+d+" bytes, got "+m.length);let w=n?Kt(m):Tc(m);if(u&&(w=me(w,e)),!b&&!y.isValid(w))throw new Error("invalid field element: outside of range 0..ORDER");return w},invertBatch:m=>Wi(y,m),cmov:(m,b,w)=>w?b:m});return Object.freeze(y)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ln=BigInt(0),Br=BigInt(1);function ko(e,t){const n=t.negate();return e?n:t}function vn(e,t){const n=Wi(e.Fp,t.map(r=>r.Z));return t.map((r,o)=>e.fromAffine(r.toAffine(n[o])))}function ji(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ur(e,t){ji(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),o=2**e,i=Zr(e),u=BigInt(e);return{windows:n,windowSize:r,mask:i,maxNumber:o,shiftBy:u}}function qo(e,t,n){const{windowSize:r,mask:o,maxNumber:i,shiftBy:u}=n;let a=Number(e&o),l=e>>u;a>r&&(a-=i,l+=Br);const d=t*r,h=d+Math.abs(a)-1,y=a===0,m=a<0,b=t%2!==0;return{nextN:l,offset:h,isZero:y,isNeg:m,isNegF:b,offsetF:d}}function Fc(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Nc(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const lr=new WeakMap,zi=new WeakMap;function fr(e){return zi.get(e)||1}function Mo(e){if(e!==Ln)throw new Error("invalid wNAF")}class $c{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let o=t;for(;n>Ln;)n&Br&&(r=r.add(o)),o=o.double(),n>>=Br;return r}precomputeWindow(t,n){const{windows:r,windowSize:o}=ur(n,this.bits),i=[];let u=t,a=u;for(let l=0;l<r;l++){a=u,i.push(a);for(let d=1;d<o;d++)a=a.add(u),i.push(a);u=a.double()}return i}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let o=this.ZERO,i=this.BASE;const u=ur(t,this.bits);for(let a=0;a<u.windows;a++){const{nextN:l,offset:d,isZero:h,isNeg:y,isNegF:m,offsetF:b}=qo(r,a,u);r=l,h?i=i.add(ko(m,n[b])):o=o.add(ko(y,n[d]))}return Mo(r),{p:o,f:i}}wNAFUnsafe(t,n,r,o=this.ZERO){const i=ur(t,this.bits);for(let u=0;u<i.windows&&r!==Ln;u++){const{nextN:a,offset:l,isZero:d,isNeg:h}=qo(r,u,i);if(r=a,!d){const y=n[l];o=o.add(h?y.negate():y)}}return Mo(r),o}getPrecomputes(t,n,r){let o=lr.get(n);return o||(o=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(o=r(o)),lr.set(n,o))),o}cached(t,n,r){const o=fr(t);return this.wNAF(o,this.getPrecomputes(o,t,r),n)}unsafe(t,n,r,o){const i=fr(t);return i===1?this._unsafeLadder(t,n,o):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),n,o)}createCache(t,n){ji(n,this.bits),zi.set(t,n),lr.delete(t)}hasCache(t){return fr(t)!==1}}function Wc(e,t,n,r){Fc(n,e),Nc(r,t);const o=n.length,i=r.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const u=e.ZERO,a=_c(BigInt(o));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const d=Zr(l),h=new Array(Number(d)+1).fill(u),y=Math.floor((t.BITS-1)/l)*l;let m=u;for(let b=y;b>=0;b-=l){h.fill(u);for(let I=0;I<i;I++){const A=r[I],v=Number(A>>BigInt(b)&d);h[v]=h[v].add(n[I])}let w=u;for(let I=h.length-1,A=u;I>0;I--)A=A.add(h[I]),w=w.add(A);if(m=m.add(w),b!==0)for(let I=0;I<l;I++)m=m.double()}return m}function Uo(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Dc(t),t}else return dn(e,{isLE:n})}function jc(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const l of["p","n","h"]){const d=t[l];if(!(typeof d=="bigint"&&d>Ln))throw new Error(`CURVE.${l} must be positive bigint`)}const o=Uo(t.p,n.Fp,r),i=Uo(t.n,n.Fn,r),a=["Gx","Gy","a","d"];for(const l of a)if(!o.isValid(t[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:o,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vt=BigInt(0),Ae=BigInt(1),dr=BigInt(2),zc=BigInt(8);function Hc(e,t,n,r){const o=e.sqr(n),i=e.sqr(r),u=e.add(e.mul(t.a,o),i),a=e.add(e.ONE,e.mul(t.d,e.mul(o,i)));return e.eql(u,a)}function Vc(e,t={}){const n=jc("edwards",e,t,t.FpFnLE),{Fp:r,Fn:o}=n;let i=n.CURVE;const{h:u}=i;Zn(t,{},{uvRatio:"function"});const a=dr<<BigInt(o.BYTES*8)-Ae,l=A=>r.create(A),d=t.uvRatio||((A,v)=>{try{return{isValid:!0,value:r.sqrt(r.div(A,v))}}catch{return{isValid:!1,value:vt}}});if(!Hc(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function h(A,v,S=!1){const B=S?Ae:vt;return On("coordinate "+A,v,B,a),v}function y(A){if(!(A instanceof w))throw new Error("ExtendedPoint expected")}const m=Ro((A,v)=>{const{X:S,Y:B,Z:C}=A,x=A.is0();v==null&&(v=x?zc:r.inv(C));const _=l(S*v),P=l(B*v),q=r.mul(C,v);if(x)return{x:vt,y:Ae};if(q!==Ae)throw new Error("invZ was invalid");return{x:_,y:P}}),b=Ro(A=>{const{a:v,d:S}=i;if(A.is0())throw new Error("bad point: ZERO");const{X:B,Y:C,Z:x,T:_}=A,P=l(B*B),q=l(C*C),R=l(x*x),L=l(R*R),U=l(P*v),V=l(R*l(U+q)),N=l(L+l(S*l(P*q)));if(V!==N)throw new Error("bad point: equation left != right (1)");const $=l(B*C),Y=l(x*_);if($!==Y)throw new Error("bad point: equation left != right (2)");return!0});class w{constructor(v,S,B,C){this.X=h("x",v),this.Y=h("y",S),this.Z=h("z",B,!0),this.T=h("t",C),Object.freeze(this)}static CURVE(){return i}static fromAffine(v){if(v instanceof w)throw new Error("extended point not allowed");const{x:S,y:B}=v||{};return h("x",S),h("y",B),new w(S,B,Ae,l(S*B))}static fromBytes(v,S=!1){const B=r.BYTES,{a:C,d:x}=i;v=_o(Rn(v,B,"point")),Tr(S,"zip215");const _=_o(v),P=v[B-1];_[B-1]=P&-129;const q=Kt(_),R=S?a:r.ORDER;On("point.y",q,vt,R);const L=l(q*q),U=l(L-Ae),V=l(x*L-C);let{isValid:N,value:$}=d(U,V);if(!N)throw new Error("bad point: invalid y coordinate");const Y=($&Ae)===Ae,ne=(P&128)!==0;if(!S&&$===vt&&ne)throw new Error("bad point: x=0 and x_0=1");return ne!==Y&&($=l(-$)),w.fromAffine({x:$,y:q})}static fromHex(v,S=!1){return w.fromBytes(it("point",v),S)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(v=8,S=!0){return I.createCache(this,v),S||this.multiply(dr),this}assertValidity(){b(this)}equals(v){y(v);const{X:S,Y:B,Z:C}=this,{X:x,Y:_,Z:P}=v,q=l(S*P),R=l(x*C),L=l(B*P),U=l(_*C);return q===R&&L===U}is0(){return this.equals(w.ZERO)}negate(){return new w(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:v}=i,{X:S,Y:B,Z:C}=this,x=l(S*S),_=l(B*B),P=l(dr*l(C*C)),q=l(v*x),R=S+B,L=l(l(R*R)-x-_),U=q+_,V=U-P,N=q-_,$=l(L*V),Y=l(U*N),ne=l(L*N),ae=l(V*U);return new w($,Y,ae,ne)}add(v){y(v);const{a:S,d:B}=i,{X:C,Y:x,Z:_,T:P}=this,{X:q,Y:R,Z:L,T:U}=v,V=l(C*q),N=l(x*R),$=l(P*B*U),Y=l(_*L),ne=l((C+x)*(q+R)-V-N),ae=Y-$,ue=Y+$,ce=l(N-S*V),we=l(ne*ae),J=l(ue*ce),ie=l(ne*ce),Oe=l(ae*ue);return new w(we,J,Oe,ie)}subtract(v){return this.add(v.negate())}multiply(v){if(!o.isValidNot0(v))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:S,f:B}=I.cached(this,v,C=>vn(w,C));return vn(w,[S,B])[0]}multiplyUnsafe(v,S=w.ZERO){if(!o.isValid(v))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return v===vt?w.ZERO:this.is0()||v===Ae?this:I.unsafe(this,v,B=>vn(w,B),S)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return I.unsafe(this,i.n).is0()}toAffine(v){return m(this,v)}clearCofactor(){return u===Ae?this:this.multiplyUnsafe(u)}toBytes(){const{x:v,y:S}=this.toAffine(),B=r.toBytes(S);return B[B.length-1]|=v&Ae?128:0,B}toHex(){return Vr(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(v){return vn(w,v)}static msm(v,S){return Wc(w,o,v,S)}_setWindowSize(v){this.precompute(v)}toRawBytes(){return this.toBytes()}}w.BASE=new w(i.Gx,i.Gy,Ae,l(i.Gx*i.Gy)),w.ZERO=new w(vt,Ae,Ae,vt),w.Fp=r,w.Fn=o;const I=new $c(w,o.BITS);return w.BASE.precompute(8),w}function Gc(e,t,n={}){if(typeof t!="function")throw new Error('"hash" function param is required');Zn(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:o,Fp:i,Fn:u}=e,a=n.randomBytes||Ci,l=n.adjustScalarBytes||(R=>R),d=n.domain||((R,L,U)=>{if(Tr(U,"phflag"),L.length||U)throw new Error("Contexts/pre-hash are not supported");return R});function h(R){return u.create(Kt(R))}function y(R){const L=B.secretKey;R=it("private key",R,L);const U=it("hashed private key",t(R),2*L),V=l(U.slice(0,L)),N=U.slice(L,2*L),$=h(V);return{head:V,prefix:N,scalar:$}}function m(R){const{head:L,prefix:U,scalar:V}=y(R),N=o.multiply(V),$=N.toBytes();return{head:L,prefix:U,scalar:V,point:N,pointBytes:$}}function b(R){return m(R).pointBytes}function w(R=Uint8Array.of(),...L){const U=Eo(...L);return h(t(d(U,it("context",R),!!r)))}function I(R,L,U={}){R=it("message",R),r&&(R=r(R));const{prefix:V,scalar:N,pointBytes:$}=m(L),Y=w(U.context,V,R),ne=o.multiply(Y).toBytes(),ae=w(U.context,ne,$,R),ue=u.create(Y+ae*N);if(!u.isValid(ue))throw new Error("sign failed: invalid s");const ce=Eo(ne,u.toBytes(ue));return Rn(ce,B.signature,"result")}const A={zip215:!0};function v(R,L,U,V=A){const{context:N,zip215:$}=V,Y=B.signature;R=it("signature",R,Y),L=it("message",L),U=it("publicKey",U,B.publicKey),$!==void 0&&Tr($,"zip215"),r&&(L=r(L));const ne=Y/2,ae=R.subarray(0,ne),ue=Kt(R.subarray(ne,Y));let ce,we,J;try{ce=e.fromBytes(U,$),we=e.fromBytes(ae,$),J=o.multiplyUnsafe(ue)}catch{return!1}if(!$&&ce.isSmallOrder())return!1;const ie=w(N,we.toBytes(),ce.toBytes(),L);return we.add(ce.multiplyUnsafe(ie)).subtract(J).clearCofactor().is0()}const S=i.BYTES,B={secretKey:S,publicKey:S,signature:2*S,seed:S};function C(R=a(B.seed)){return Rn(R,B.seed,"seed")}function x(R){const L=q.randomSecretKey(R);return{secretKey:L,publicKey:b(L)}}function _(R){return Gn(R)&&R.length===u.BYTES}function P(R,L){try{return!!e.fromBytes(R,L)}catch{return!1}}const q={getExtendedPublicKey:m,randomSecretKey:C,isValidSecretKey:_,isValidPublicKey:P,toMontgomery(R){const{y:L}=e.fromBytes(R),U=B.publicKey,V=U===32;if(!V&&U!==57)throw new Error("only defined for 25519 and 448");const N=V?i.div(Ae+L,Ae-L):i.div(L-Ae,L+Ae);return i.toBytes(N)},toMontgomerySecret(R){const L=B.secretKey;Rn(R,L);const U=t(R.subarray(0,L));return l(U).subarray(0,L)},randomPrivateKey:C,precompute(R=8,L=e.BASE){return L.precompute(R,!1)}};return Object.freeze({keygen:x,getPublicKey:b,sign:I,verify:v,utils:q,Point:e,lengths:B})}function Zc(e){const t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp,r=dn(t.n,e.nBitLength,!0),o={Fp:n,Fn:r,uvRatio:e.uvRatio},i={randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve};return{CURVE:t,curveOpts:o,hash:e.hash,eddsaOpts:i}}function Kc(e,t){const n=t.Point;return Object.assign({},t,{ExtendedPoint:n,CURVE:e,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function Yc(e){const{CURVE:t,curveOpts:n,hash:r,eddsaOpts:o}=Zc(e),i=Vc(t,n),u=Gc(i,r,o);return Kc(e,u)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tn=BigInt(0),Ht=BigInt(1),xn=BigInt(2);function Xc(e){return Zn(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})}function Jc(e){const t=Xc(e),{P:n,type:r,adjustScalarBytes:o,powPminus2:i,randomBytes:u}=t,a=r==="x25519";if(!a&&r!=="x448")throw new Error("invalid type");const l=u||Ci,d=a?255:448,h=a?32:56,y=BigInt(a?9:5),m=BigInt(a?121665:39081),b=a?xn**BigInt(254):xn**BigInt(447),w=a?BigInt(8)*xn**BigInt(251)-Ht:BigInt(4)*xn**BigInt(445)-Ht,I=b+w+Ht,A=N=>me(N,n),v=S(y);function S(N){return Mi(A(N),h)}function B(N){const $=it("u coordinate",N,h);return a&&($[31]&=127),A(Kt($))}function C(N){return Kt(o(it("scalar",N,h)))}function x(N,$){const Y=q(B($),C(N));if(Y===tn)throw new Error("invalid private or public key received");return S(Y)}function _(N){return x(N,v)}function P(N,$,Y){const ne=A(N*($-Y));return $=A($-ne),Y=A(Y+ne),{x_2:$,x_3:Y}}function q(N,$){On("u",N,tn,n),On("scalar",$,b,I);const Y=$,ne=N;let ae=Ht,ue=tn,ce=N,we=Ht,J=tn;for(let Oe=BigInt(d-1);Oe>=tn;Oe--){const Je=Y>>Oe&Ht;J^=Je,{x_2:ae,x_3:ce}=P(J,ae,ce),{x_2:ue,x_3:we}=P(J,ue,we),J=Je;const Qe=ae+ue,et=A(Qe*Qe),tt=ae-ue,Me=A(tt*tt),M=et-Me,k=ce+we,X=ce-we,ke=A(X*Qe),oe=A(k*tt),Be=ke+oe,nt=ke-oe;ce=A(Be*Be),we=A(ne*A(nt*nt)),ae=A(et*Me),ue=A(M*(et+A(m*M)))}({x_2:ae,x_3:ce}=P(J,ae,ce)),{x_2:ue,x_3:we}=P(J,ue,we);const ie=i(ue);return A(ae*ie)}const R={secretKey:h,publicKey:h,seed:h},L=(N=l(h))=>(Nt(N,R.seed),N);function U(N){const $=L(N);return{secretKey:$,publicKey:_($)}}return{keygen:U,getSharedSecret:(N,$)=>x(N,$),getPublicKey:N=>_(N),scalarMult:x,scalarMultBase:_,utils:{randomSecretKey:L,randomPrivateKey:L},GuBytes:v.slice(),lengths:R}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qc=BigInt(1),Do=BigInt(2),eu=BigInt(3),tu=BigInt(5),nu=BigInt(8),Yr=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Hi={p:Yr,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:nu,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Vi(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),o=BigInt(80),i=Yr,a=e*e%i*e%i,l=He(a,Do,i)*a%i,d=He(l,Qc,i)*e%i,h=He(d,tu,i)*d%i,y=He(h,t,i)*h%i,m=He(y,n,i)*y%i,b=He(m,r,i)*m%i,w=He(b,o,i)*b%i,I=He(w,o,i)*b%i,A=He(I,t,i)*h%i;return{pow_p_5_8:He(A,Do,i)*e%i,b2:a}}function Gi(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}const Oo=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function ru(e,t){const n=Yr,r=me(t*t*t,n),o=me(r*r*t,n),i=Vi(e*o).pow_p_5_8;let u=me(e*r*i,n);const a=me(t*u*u,n),l=u,d=me(u*Oo,n),h=a===e,y=a===me(-e,n),m=a===me(-e*Oo,n);return h&&(u=l),(y||m)&&(u=d),Mc(u,n)&&(u=me(-u,n)),{isValid:h||y,value:u}}const Zi=dn(Hi.p,{isLE:!0}),ou={...Hi,Fp:Zi,hash:Sc,adjustScalarBytes:Gi,uvRatio:ru},Lo=Yc(ou),hr=(()=>{const e=Zi.ORDER;return Jc({P:e,type:"x25519",powPminus2:t=>{const{pow_p_5_8:n,b2:r}=Vi(t);return me(He(n,eu,e)*r,e)},adjustScalarBytes:Gi})})(),iu={withStackTrace:!1},Ki=(e,t,n=iu)=>{const r=t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},o=n.withStackTrace?new Error().stack:void 0;return{data:r,message:e,stack:o}};function _t(e,t,n,r){function o(i){return i instanceof n?i:new n(function(u){u(i)})}return new(n||(n=Promise))(function(i,u){function a(h){try{d(r.next(h))}catch(y){u(y)}}function l(h){try{d(r.throw(h))}catch(y){u(y)}}function d(h){h.done?i(h.value):o(h.value).then(a,l)}d((r=r.apply(e,[])).next())})}function Fo(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(e){return this instanceof at?(this.v=e,this):new at(e)}function No(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(b){return function(w){return Promise.resolve(w).then(b,y)}}function a(b,w){r[b]&&(o[b]=function(I){return new Promise(function(A,v){i.push([b,I,A,v])>1||l(b,I)})},w&&(o[b]=w(o[b])))}function l(b,w){try{d(r[b](w))}catch(I){m(i[0][3],I)}}function d(b){b.value instanceof at?Promise.resolve(b.value.v).then(h,y):m(i[0][2],b)}function h(b){l("next",b)}function y(b){l("throw",b)}function m(b,w){b(w),i.shift(),i.length&&l(i[0][0],i[0][1])}}function su(e){var t,n;return t={},r("next"),r("throw",function(o){throw o}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(o,i){t[o]=e[o]?function(u){return(n=!n)?{value:at(e[o](u)),done:!1}:i?i(u):u}:i}}function au(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Fo=="function"?Fo(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(u){return new Promise(function(a,l){u=e[i](u),o(a,l,u.done,u.value)})}}function o(i,u,a,l){Promise.resolve(l).then(function(d){i({value:d,done:a})},u)}}class j{constructor(t){this._promise=t}static fromSafePromise(t){const n=t.then(r=>new Ve(r));return new j(n)}static fromPromise(t,n){const r=t.then(o=>new Ve(o)).catch(o=>new Ge(n(o)));return new j(r)}static fromThrowable(t,n){return(...r)=>new j(_t(this,void 0,void 0,function*(){try{return new Ve(yield t(...r))}catch(o){return new Ge(n?n(o):o)}}))}static combine(t){return cu(t)}static combineWithAllErrors(t){return uu(t)}map(t){return new j(this._promise.then(n=>_t(this,void 0,void 0,function*(){return n.isErr()?new Ge(n.error):new Ve(yield t(n.value))})))}andThrough(t){return new j(this._promise.then(n=>_t(this,void 0,void 0,function*(){if(n.isErr())return new Ge(n.error);const r=yield t(n.value);return r.isErr()?new Ge(r.error):new Ve(n.value)})))}andTee(t){return new j(this._promise.then(n=>_t(this,void 0,void 0,function*(){if(n.isErr())return new Ge(n.error);try{yield t(n.value)}catch{}return new Ve(n.value)})))}orTee(t){return new j(this._promise.then(n=>_t(this,void 0,void 0,function*(){if(n.isOk())return new Ve(n.value);try{yield t(n.error)}catch{}return new Ge(n.error)})))}mapErr(t){return new j(this._promise.then(n=>_t(this,void 0,void 0,function*(){return n.isOk()?new Ve(n.value):new Ge(yield t(n.error))})))}andThen(t){return new j(this._promise.then(n=>{if(n.isErr())return new Ge(n.error);const r=t(n.value);return r instanceof j?r._promise:r}))}orElse(t){return new j(this._promise.then(n=>_t(this,void 0,void 0,function*(){return n.isErr()?t(n.error):new Ve(n.value)})))}match(t,n){return this._promise.then(r=>r.match(t,n))}unwrapOr(t){return this._promise.then(n=>n.unwrapOr(t))}safeUnwrap(){return No(this,arguments,function*(){return yield at(yield at(yield*su(au(yield at(this._promise.then(n=>n.safeUnwrap()))))))})}then(t,n){return this._promise.then(t,n)}[Symbol.asyncIterator](){return No(this,arguments,function*(){const n=yield at(this._promise);return n.isErr()&&(yield yield at(mt(n.error))),yield at(n.value)})}}function ge(e){return new j(Promise.resolve(new Ve(e)))}function mt(e){return new j(Promise.resolve(new Ge(e)))}j.fromPromise;j.fromSafePromise;j.fromThrowable;const Yi=e=>{let t=z([]);for(const n of e)if(n.isErr()){t=H(n.error);break}else t.map(r=>r.push(n.value));return t},cu=e=>j.fromSafePromise(Promise.all(e)).andThen(Yi),Xi=e=>{let t=z([]);for(const n of e)n.isErr()&&t.isErr()?t.error.push(n.error):n.isErr()&&t.isOk()?t=H([n.error]):n.isOk()&&t.isOk()&&t.value.push(n.value);return t},uu=e=>j.fromSafePromise(Promise.all(e)).andThen(Xi);var Ot;(function(e){function t(o,i){return(...u)=>{try{const a=o(...u);return z(a)}catch(a){return H(i?i(a):a)}}}e.fromThrowable=t;function n(o){return Yi(o)}e.combine=n;function r(o){return Xi(o)}e.combineWithAllErrors=r})(Ot||(Ot={}));function z(e){return new Ve(e)}function H(e){return new Ge(e)}class Ve{constructor(t){this.value=t}isOk(){return!0}isErr(){return!this.isOk()}map(t){return z(t(this.value))}mapErr(t){return z(this.value)}andThen(t){return t(this.value)}andThrough(t){return t(this.value).map(n=>this.value)}andTee(t){try{t(this.value)}catch{}return z(this.value)}orTee(t){return z(this.value)}orElse(t){return z(this.value)}asyncAndThen(t){return t(this.value)}asyncAndThrough(t){return t(this.value).map(()=>this.value)}asyncMap(t){return j.fromSafePromise(t(this.value))}unwrapOr(t){return this.value}match(t,n){return t(this.value)}safeUnwrap(){const t=this.value;return function*(){return t}()}_unsafeUnwrap(t){return this.value}_unsafeUnwrapErr(t){throw Ki("Called `_unsafeUnwrapErr` on an Ok",this,t)}*[Symbol.iterator](){return this.value}}class Ge{constructor(t){this.error=t}isOk(){return!1}isErr(){return!this.isOk()}map(t){return H(this.error)}mapErr(t){return H(t(this.error))}andThrough(t){return H(this.error)}andTee(t){return H(this.error)}orTee(t){try{t(this.error)}catch{}return H(this.error)}andThen(t){return H(this.error)}orElse(t){return t(this.error)}asyncAndThen(t){return mt(this.error)}asyncAndThrough(t){return mt(this.error)}asyncMap(t){return mt(this.error)}unwrapOr(t){return t}match(t,n){return n(this.error)}safeUnwrap(){const t=this.error;return function*(){throw yield H(t),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(t){throw Ki("Called `_unsafeUnwrap` on an Err",this,t)}_unsafeUnwrapErr(t){return this.error}*[Symbol.iterator](){const t=this;return yield t,t}}Ot.fromThrowable;const lu="Input must be an string, Buffer or Uint8Array";function fu(e){let t;if(e instanceof Uint8Array)t=e;else if(typeof e=="string")t=new TextEncoder().encode(e);else throw new Error(lu);return t}function du(e){return Array.prototype.map.call(e,function(t){return(t<16?"0":"")+t.toString(16)}).join("")}function In(e){return(4294967296+e).toString(16).substring(1)}function hu(e,t,n){let r=`
`+e+" = ";for(let o=0;o<t.length;o+=2){if(n===32)r+=In(t[o]).toUpperCase(),r+=" ",r+=In(t[o+1]).toUpperCase();else if(n===64)r+=In(t[o+1]).toUpperCase(),r+=In(t[o]).toUpperCase();else throw new Error("Invalid size "+n);o%6===4?r+=`
`+new Array(e.length+4).join(" "):o<t.length-2&&(r+=" ")}console.log(r)}function pu(e,t,n){let r=new Date().getTime();const o=new Uint8Array(t);for(let u=0;u<t;u++)o[u]=u%256;const i=new Date().getTime();console.log("Generated random input in "+(i-r)+"ms"),r=i;for(let u=0;u<n;u++){const a=e(o),l=new Date().getTime(),d=l-r;r=l,console.log("Hashed in "+d+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(d/1e3)*100)/100+" MB PER SECOND")}}var Ji={normalizeInput:fu,toHex:du,debugPrint:hu,testSpeed:pu};const Cn=Ji;function An(e,t,n){const r=e[t]+e[n];let o=e[t+1]+e[n+1];r>=4294967296&&o++,e[t]=r,e[t+1]=o}function $o(e,t,n,r){let o=e[t]+n;n<0&&(o+=4294967296);let i=e[t+1]+r;o>=4294967296&&i++,e[t]=o,e[t+1]=i}function Qi(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function xt(e,t,n,r,o,i){const u=sn[o],a=sn[o+1],l=sn[i],d=sn[i+1];An(G,e,t),$o(G,e,u,a);let h=G[r]^G[e],y=G[r+1]^G[e+1];G[r]=y,G[r+1]=h,An(G,n,r),h=G[t]^G[n],y=G[t+1]^G[n+1],G[t]=h>>>24^y<<8,G[t+1]=y>>>24^h<<8,An(G,e,t),$o(G,e,l,d),h=G[r]^G[e],y=G[r+1]^G[e+1],G[r]=h>>>16^y<<16,G[r+1]=y>>>16^h<<16,An(G,n,r),h=G[t]^G[n],y=G[t+1]^G[n+1],G[t]=y>>>31^h<<1,G[t+1]=h>>>31^y<<1}const es=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),mu=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],Re=new Uint8Array(mu.map(function(e){return e*2})),G=new Uint32Array(32),sn=new Uint32Array(32);function ts(e,t){let n=0;for(n=0;n<16;n++)G[n]=e.h[n],G[n+16]=es[n];for(G[24]=G[24]^e.t,G[25]=G[25]^e.t/4294967296,t&&(G[28]=~G[28],G[29]=~G[29]),n=0;n<32;n++)sn[n]=Qi(e.b,4*n);for(n=0;n<12;n++)xt(0,8,16,24,Re[n*16+0],Re[n*16+1]),xt(2,10,18,26,Re[n*16+2],Re[n*16+3]),xt(4,12,20,28,Re[n*16+4],Re[n*16+5]),xt(6,14,22,30,Re[n*16+6],Re[n*16+7]),xt(0,10,20,30,Re[n*16+8],Re[n*16+9]),xt(2,12,22,24,Re[n*16+10],Re[n*16+11]),xt(4,14,16,26,Re[n*16+12],Re[n*16+13]),xt(6,8,18,28,Re[n*16+14],Re[n*16+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^G[n]^G[n+16]}const It=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function ns(e,t,n,r){if(e===0||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(n&&n.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(r&&r.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const o={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};It.fill(0),It[0]=e,t&&(It[1]=t.length),It[2]=1,It[3]=1,n&&It.set(n,32),r&&It.set(r,48);for(let i=0;i<16;i++)o.h[i]=es[i]^Qi(It,i*4);return t&&(Xr(o,t),o.c=128),o}function Xr(e,t){for(let n=0;n<t.length;n++)e.c===128&&(e.t+=e.c,ts(e,!1),e.c=0),e.b[e.c++]=t[n]}function rs(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;ts(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3);return t}function os(e,t,n,r,o){n=n||64,e=Cn.normalizeInput(e),r&&(r=Cn.normalizeInput(r)),o&&(o=Cn.normalizeInput(o));const i=ns(n,t,r,o);return Xr(i,e),rs(i)}function yu(e,t,n,r,o){const i=os(e,t,n,r,o);return Cn.toHex(i)}var gu={blake2b:os,blake2bHex:yu,blake2bInit:ns,blake2bUpdate:Xr,blake2bFinal:rs};const is=Ji;function bu(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function At(e,t,n,r,o,i){Q[e]=Q[e]+Q[t]+o,Q[r]=En(Q[r]^Q[e],16),Q[n]=Q[n]+Q[r],Q[t]=En(Q[t]^Q[n],12),Q[e]=Q[e]+Q[t]+i,Q[r]=En(Q[r]^Q[e],8),Q[n]=Q[n]+Q[r],Q[t]=En(Q[t]^Q[n],7)}function En(e,t){return e>>>t^e<<32-t}const ss=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ce=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Q=new Uint32Array(16),Ee=new Uint32Array(16);function as(e,t){let n=0;for(n=0;n<8;n++)Q[n]=e.h[n],Q[n+8]=ss[n];for(Q[12]^=e.t,Q[13]^=e.t/4294967296,t&&(Q[14]=~Q[14]),n=0;n<16;n++)Ee[n]=bu(e.b,4*n);for(n=0;n<10;n++)At(0,4,8,12,Ee[Ce[n*16+0]],Ee[Ce[n*16+1]]),At(1,5,9,13,Ee[Ce[n*16+2]],Ee[Ce[n*16+3]]),At(2,6,10,14,Ee[Ce[n*16+4]],Ee[Ce[n*16+5]]),At(3,7,11,15,Ee[Ce[n*16+6]],Ee[Ce[n*16+7]]),At(0,5,10,15,Ee[Ce[n*16+8]],Ee[Ce[n*16+9]]),At(1,6,11,12,Ee[Ce[n*16+10]],Ee[Ce[n*16+11]]),At(2,7,8,13,Ee[Ce[n*16+12]],Ee[Ce[n*16+13]]),At(3,4,9,14,Ee[Ce[n*16+14]],Ee[Ce[n*16+15]]);for(n=0;n<8;n++)e.h[n]^=Q[n]^Q[n+8]}function cs(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");const r={h:new Uint32Array(ss),b:new Uint8Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(Jr(r,t),r.c=64),r}function Jr(e,t){for(let n=0;n<t.length;n++)e.c===64&&(e.t+=e.c,as(e,!1),e.c=0),e.b[e.c++]=t[n]}function us(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;as(e,!0);const t=new Uint8Array(e.outlen);for(let n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(n&3)&255;return t}function ls(e,t,n){n=n||32,e=is.normalizeInput(e);const r=cs(n,t);return Jr(r,e),us(r)}function wu(e,t,n){const r=ls(e,t,n);return is.toHex(r)}var vu={blake2s:ls,blake2sHex:wu,blake2sInit:cs,blake2sUpdate:Jr,blake2sFinal:us};const nn=gu,rn=vu;var xu={blake2b:nn.blake2b,blake2bHex:nn.blake2bHex,blake2bInit:nn.blake2bInit,blake2bUpdate:nn.blake2bUpdate,blake2bFinal:nn.blake2bFinal,blake2s:rn.blake2s,blake2sHex:rn.blake2sHex,blake2sInit:rn.blake2sInit,blake2sUpdate:rn.blake2sUpdate,blake2sFinal:rn.blake2sFinal};const Iu=Qo(xu);var fs=Symbol.for("immer-nothing"),Wo=Symbol.for("immer-draftable"),Fe=Symbol.for("immer-state");function Ke(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yt=Object.getPrototypeOf;function Xt(e){return!!e&&!!e[Fe]}function Lt(e){var t;return e?ds(e)||Array.isArray(e)||!!e[Wo]||!!((t=e.constructor)!=null&&t[Wo])||hn(e)||Yn(e):!1}var Au=Object.prototype.constructor.toString();function ds(e){if(!e||typeof e!="object")return!1;const t=Yt(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Au}function Fn(e,t){Kn(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Kn(e){const t=e[Fe];return t?t.type_:Array.isArray(e)?1:hn(e)?2:Yn(e)?3:0}function _r(e,t){return Kn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hs(e,t,n){const r=Kn(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Eu(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function hn(e){return e instanceof Map}function Yn(e){return e instanceof Set}function Ct(e){return e.copy_||e.base_}function Rr(e,t){if(hn(e))return new Map(e);if(Yn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=ds(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Fe];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const u=o[i],a=r[u];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[u]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[u]})}return Object.create(Yt(e),r)}else{const r=Yt(e);if(r!==null&&n)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function Qr(e,t=!1){return Xn(e)||Xt(e)||!Lt(e)||(Kn(e)>1&&Object.defineProperties(e,{set:{value:Sn},add:{value:Sn},clear:{value:Sn},delete:{value:Sn}}),Object.freeze(e),t&&Object.values(e).forEach(n=>Qr(n,!0))),e}function Sn(){Ke(2)}function Xn(e){return Object.isFrozen(e)}var Su={};function Ft(e){const t=Su[e];return t||Ke(0,e),t}var cn;function ps(){return cn}function Tu(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jo(e,t){t&&(Ft("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Cr(e){Pr(e),e.drafts_.forEach(Bu),e.drafts_=null}function Pr(e){e===cn&&(cn=e.parent_)}function zo(e){return cn=Tu(cn,e)}function Bu(e){const t=e[Fe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ho(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Fe].modified_&&(Cr(t),Ke(4)),Lt(e)&&(e=Nn(t,e),t.parent_||$n(t,e)),t.patches_&&Ft("Patches").generateReplacementPatches_(n[Fe].base_,e,t.patches_,t.inversePatches_)):e=Nn(t,n,[]),Cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==fs?e:void 0}function Nn(e,t,n){if(Xn(t))return t;const r=t[Fe];if(!r)return Fn(t,(o,i)=>Vo(e,r,t,o,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return $n(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,u=!1;r.type_===3&&(i=new Set(o),o.clear(),u=!0),Fn(i,(a,l)=>Vo(e,r,o,a,l,n,u)),$n(e,o,!1),n&&e.patches_&&Ft("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Vo(e,t,n,r,o,i,u){if(Xt(o)){const a=i&&t&&t.type_!==3&&!_r(t.assigned_,r)?i.concat(r):void 0,l=Nn(e,o,a);if(hs(n,r,l),Xt(l))e.canAutoFreeze_=!1;else return}else u&&n.add(o);if(Lt(o)&&!Xn(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Nn(e,o),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&(hn(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&$n(e,o)}}function $n(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Qr(t,n)}function _u(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ps(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=eo;n&&(o=[r],i=un);const{revoke:u,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=u,a}var eo={get(e,t){if(t===Fe)return e;const n=Ct(e);if(!_r(n,t))return Ru(e,n,t);const r=n[t];return e.finalized_||!Lt(r)?r:r===pr(e.base_,t)?(mr(e),e.copy_[t]=qr(r,e)):r},has(e,t){return t in Ct(e)},ownKeys(e){return Reflect.ownKeys(Ct(e))},set(e,t,n){const r=ms(Ct(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const o=pr(Ct(e),t),i=o==null?void 0:o[Fe];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Eu(n,o)&&(n!==void 0||_r(e.base_,t)))return!0;mr(e),kr(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return pr(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,mr(e),kr(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ct(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Ke(11)},getPrototypeOf(e){return Yt(e.base_)},setPrototypeOf(){Ke(12)}},un={};Fn(eo,(e,t)=>{un[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});un.deleteProperty=function(e,t){return un.set.call(this,e,t,void 0)};un.set=function(e,t,n){return eo.set.call(this,e[0],t,n,e[0])};function pr(e,t){const n=e[Fe];return(n?Ct(n):e)[t]}function Ru(e,t,n){var o;const r=ms(t,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function ms(e,t){if(!(t in e))return;let n=Yt(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Yt(n)}}function kr(e){e.modified_||(e.modified_=!0,e.parent_&&kr(e.parent_))}function mr(e){e.copy_||(e.copy_=Rr(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Cu=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const u=this;return function(l=i,...d){return u.produce(l,h=>n.call(this,h,...d))}}typeof n!="function"&&Ke(6),r!==void 0&&typeof r!="function"&&Ke(7);let o;if(Lt(t)){const i=zo(this),u=qr(t,void 0);let a=!0;try{o=n(u),a=!1}finally{a?Cr(i):Pr(i)}return jo(i,r),Ho(o,i)}else if(!t||typeof t!="object"){if(o=n(t),o===void 0&&(o=t),o===fs&&(o=void 0),this.autoFreeze_&&Qr(o,!0),r){const i=[],u=[];Ft("Patches").generateReplacementPatches_(t,o,i,u),r(i,u)}return o}else Ke(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(u,...a)=>this.produceWithPatches(u,l=>t(l,...a));let r,o;return[this.produce(t,n,(u,a)=>{r=u,o=a}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Lt(e)||Ke(8),Xt(e)&&(e=Pu(e));const t=zo(this),n=qr(e,void 0);return n[Fe].isManual_=!0,Pr(t),n}finishDraft(e,t){const n=e&&e[Fe];(!n||!n.isManual_)&&Ke(9);const{scope_:r}=n;return jo(r,t),Ho(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const o=t[n];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}n>-1&&(t=t.slice(n+1));const r=Ft("Patches").applyPatches_;return Xt(e)?r(e,t):this.produce(e,o=>r(o,t))}};function qr(e,t){const n=hn(e)?Ft("MapSet").proxyMap_(e,t):Yn(e)?Ft("MapSet").proxySet_(e,t):_u(e,t);return(t?t.scope_:ps()).drafts_.push(n),n}function Pu(e){return Xt(e)||Ke(10,e),ys(e)}function ys(e){if(!Lt(e)||Xn(e))return e;const t=e[Fe];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Rr(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Rr(e,!0);return Fn(n,(r,o)=>{hs(n,r,ys(o))}),t&&(t.finalized_=!1),n}var ku=new Cu,ye=ku.produce,ht;function qu(e){return{lang:(e==null?void 0:e.lang)??(ht==null?void 0:ht.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(ht==null?void 0:ht.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(ht==null?void 0:ht.abortPipeEarly)}}var yr;function Mu(e){return yr==null?void 0:yr.get(e)}var gr;function Uu(e){return gr==null?void 0:gr.get(e)}var br;function Du(e,t){var n;return(n=br==null?void 0:br.get(e))==null?void 0:n.get(t)}function Wn(e){var n,r;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((r=(n=Object.getPrototypeOf(e))==null?void 0:n.constructor)==null?void 0:r.name))??"null":t}function je(e,t,n,r,o){const i=o&&"input"in o?o.input:n.value,u=(o==null?void 0:o.expected)??e.expects??null,a=(o==null?void 0:o.received)??Wn(i),l={kind:e.kind,type:e.type,input:i,expected:u,received:a,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${a}`,requirement:e.requirement,path:o==null?void 0:o.path,issues:o==null?void 0:o.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},d=e.kind==="schema",h=(o==null?void 0:o.message)??e.message??Du(e.reference,l.lang)??(d?Uu(l.lang):null)??r.message??Mu(l.lang);h&&(l.message=typeof h=="function"?h(l):h),d&&(n.typed=!1),n.issues?n.issues.push(l):n.issues=[l]}function gs(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}var Ou=class extends Error{constructor(t){super(t[0].message);po(this,"issues");this.name="ValiError",this.issues=t}};function to(e,t){return{kind:"validation",type:"check",reference:to,async:!1,expects:null,requirement:e,message:t,_run(n,r){return n.typed&&!this.requirement(n.value)&&je(this,"input",n,r),n}}}function bs(e,t){return{kind:"validation",type:"min_value",reference:bs,async:!1,expects:`>=${e instanceof Date?e.toJSON():Wn(e)}`,requirement:e,message:t,_run(n,r){return n.typed&&n.value<this.requirement&&je(this,"value",n,r,{received:n.value instanceof Date?n.value.toJSON():Wn(n.value)}),n}}}function Lu(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Te(e,t){return{kind:"schema",type:"array",reference:Te,expects:"Array",async:!1,item:e,message:t,_run(n,r){var i;const o=n.value;if(Array.isArray(o)){n.typed=!0,n.value=[];for(let u=0;u<o.length;u++){const a=o[u],l=this.item._run({typed:!1,value:a},r);if(l.issues){const d={type:"array",origin:"value",input:o,key:u,value:a};for(const h of l.issues)h.path?h.path.unshift(d):h.path=[d],(i=n.issues)==null||i.push(h);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value.push(l.value)}}else je(this,"type",n,r);return n}}}function xe(e){return{kind:"schema",type:"boolean",reference:xe,expects:"boolean",async:!1,message:e,_run(t,n){return typeof t.value=="boolean"?t.typed=!0:je(this,"type",t,n),t}}}function W(e,t){return{kind:"schema",type:"literal",reference:W,expects:Wn(e),async:!1,literal:e,message:t,_run(n,r){return n.value===this.literal?n.typed=!0:je(this,"type",n,r),n}}}function Xe(e){return{kind:"schema",type:"number",reference:Xe,expects:"number",async:!1,message:e,_run(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:je(this,"type",t,n),t}}}function D(e,t){return{kind:"schema",type:"object",reference:D,expects:"Object",async:!1,entries:e,message:t,_run(n,r){var i;const o=n.value;if(o&&typeof o=="object"){n.typed=!0,n.value={};for(const u in this.entries){const a=o[u],l=this.entries[u]._run({typed:!1,value:a},r);if(l.issues){const d={type:"object",origin:"value",input:o,key:u,value:a};for(const h of l.issues)h.path?h.path.unshift(d):h.path=[d],(i=n.issues)==null||i.push(h);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),(l.value!==void 0||u in o)&&(n.value[u]=l.value)}}else je(this,"type",n,r);return n}}}function F(e,...t){const n={kind:"schema",type:"optional",reference:F,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(r,o){return r.value===void 0&&("default"in this&&(r.value=Lu(this,r,o)),r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,o)}};return 0 in t&&(n.default=t[0]),n}function O(e){return{kind:"schema",type:"string",reference:O,expects:"string",async:!1,message:e,_run(t,n){return typeof t.value=="string"?t.typed=!0:je(this,"type",t,n),t}}}function Go(e){let t;if(e)for(const n of e)t?t.push(...n.issues):t=n.issues;return t}function be(e,t){return{kind:"schema",type:"union",reference:be,expects:gs(e.map(n=>n.expects),"|"),async:!1,options:e,message:t,_run(n,r){let o,i,u;for(const a of this.options){const l=a._run({typed:!1,value:n.value},r);if(l.typed)if(l.issues)i?i.push(l):i=[l];else{o=l;break}else u?u.push(l):u=[l]}if(o)return o;if(i){if(i.length===1)return i[0];je(this,"type",n,r,{issues:Go(i)}),n.typed=!0}else{if((u==null?void 0:u.length)===1)return u[0];je(this,"type",n,r,{issues:Go(u)})}return n}}}function no(e,t,n){return{kind:"schema",type:"variant",reference:no,expects:"Object",async:!1,key:e,options:t,message:n,_run(r,o){const i=r.value;if(i&&typeof i=="object"){let u,a=0,l=this.key,d=[];const h=(y,m)=>{for(const b of y.options){if(b.type==="variant")h(b,new Set(m).add(b.key));else{let w=!0,I=0;for(const A of m){if(b.entries[A]._run({typed:!1,value:i[A]},o).issues){w=!1,l!==A&&(a<I||a===I&&A in i&&!(l in i))&&(a=I,l=A,d=[]),l===A&&d.push(b.entries[A].expects);break}I++}if(w){const A=b._run({typed:!1,value:i},o);(!u||!u.typed&&A.typed)&&(u=A)}}if(u&&!u.issues)break}};if(h(this,new Set([this.key])),u)return u;je(this,"type",r,o,{input:i[l],expected:gs(d,"|"),path:[{type:"object",origin:"value",input:i,key:l,value:i[l]}]})}else je(this,"type",r,o);return r}}}function ws(e,t,n){const r=e._run({typed:!1,value:t},qu(n));if(r.issues)throw new Ou(r.issues);return r.value}function Fu(e,t){const n={};for(const r in e.entries)n[r]=F(e.entries[r]);return{...e,entries:n}}function ro(...e){return{...e[0],pipe:e,_run(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r._run(t,n))}return t}}}var Se=[];for(var wr=0;wr<256;++wr)Se.push((wr+256).toString(16).slice(1));function Nu(e,t=0){return(Se[e[t+0]]+Se[e[t+1]]+Se[e[t+2]]+Se[e[t+3]]+"-"+Se[e[t+4]]+Se[e[t+5]]+"-"+Se[e[t+6]]+Se[e[t+7]]+"-"+Se[e[t+8]]+Se[e[t+9]]+"-"+Se[e[t+10]]+Se[e[t+11]]+Se[e[t+12]]+Se[e[t+13]]+Se[e[t+14]]+Se[e[t+15]]).toLowerCase()}var Tn,$u=new Uint8Array(16);function Wu(){if(!Tn&&(Tn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tn($u)}var ju=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Zo={randomUUID:ju};function ln(e,t,n){if(Zo.randomUUID&&!t&&!e)return Zo.randomUUID();e=e||{};var r=e.random||(e.rng||Wu)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return Nu(r)}var vs={exports:{}},oo={},io={};Object.defineProperty(io,"__esModule",{value:!0});function zu(e){var t=4,n=e.length,r=n%t;if(!r)return e;var o=n,i=t-r,u=n+i,a=Buffer.alloc(u);for(a.write(e);i--;)a.write("=",o++);return a.toString()}io.default=zu;Object.defineProperty(oo,"__esModule",{value:!0});var Hu=io;function xs(e,t){return t===void 0&&(t="utf8"),Buffer.isBuffer(e)?Mr(e.toString("base64")):Mr(Buffer.from(e,t).toString("base64"))}function Vu(e,t){return t===void 0&&(t="utf8"),Buffer.from(so(e),"base64").toString(t)}function so(e){return e=e.toString(),Hu.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function Mr(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gu(e){return Buffer.from(so(e),"base64")}var Jt=xs;Jt.encode=xs;Jt.decode=Vu;Jt.toBase64=so;Jt.fromBase64=Mr;Jt.toBuffer=Gu;oo.default=Jt;(function(e){e.exports=oo.default,e.exports.default=e.exports})(vs);var Zu=vs.exports;const Ku=Qo(Zu);var Yu=()=>{globalThis.Buffer||(globalThis.Buffer=he.Buffer)},Xu=e=>({onConnect:new pe,onDisconnect:new pe,onUpdateSharedAccounts:new pe,connected:new ai(1),requestItems:new Ie([]),onCancelRequestItem:new pe,onIgnoreTransactionItem:new pe,accounts:new Ie([]),onShowPopover:new pe,status:new Ie("default"),loggedInTimestamp:new Ie(""),isMobile:new Ie(e.providers.environmentModule.isMobile()),isWalletLinked:new Ie(!1),showPopoverMenu:new Ie(!1),isExtensionAvailable:new Ie(!1),fullWidth:new Ie(!1),activeTab:new Ie("sharing"),mode:new Ie("light"),theme:new Ie("radix-blue"),avatarUrl:new Ie(""),personaLabel:new Ie(""),personaData:new Ie([]),dAppName:new Ie(""),onLinkClick:new pe});function Ur(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Ju(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ao(e,...t){if(!Ju(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function co(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ur(e.outputLen),Ur(e.blockLen)}function jn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Qu(e,t){ao(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}var vr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ot=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function el(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function fn(e){return typeof e=="string"&&(e=el(e)),ao(e),e}var Is=class{clone(){return this._cloneInto()}};function tl(e){const t=r=>e().update(fn(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}var As=class extends Is{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,co(e);const n=fn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return jn(this),this.iHash.update(e),this}digestInto(e){jn(this),ao(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:u}=this;return e=e,e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},uo=(e,t,n)=>new As(e,t).update(n).digest();uo.create=(e,t)=>new As(e,t);function nl(e,t,n){return co(e),n===void 0&&(n=new Uint8Array(e.outputLen)),uo(e,fn(n),fn(t))}var xr=new Uint8Array([0]),rl=new Uint8Array;function ol(e,t,n,r=32){if(co(e),Ur(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const o=Math.ceil(r/e.outputLen),i=new Uint8Array(o*e.outputLen),u=uo.create(e,t),a=u._cloneInto(),l=new Uint8Array(u.outputLen);for(let d=0;d<o;d++)xr[0]=d+1,a.update(d===0?rl:l).update(n).update(xr).digestInto(l),i.set(l,e.outputLen*d),u._cloneInto(a);return u.destroy(),a.destroy(),l.fill(0),xr.fill(0),i.slice(0,r)}var il=(e,t,n,r,o)=>ol(e,nl(e,t,n),r,o);function sl(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),u=Number(n>>o&i),a=Number(n&i),l=r?4:0,d=r?0:4;e.setUint32(t+l,u,r),e.setUint32(t+d,a,r)}var al=(e,t,n)=>e&t^~e&n,cl=(e,t,n)=>e&t^e&n^t&n,ul=class extends Is{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vr(this.buffer)}update(e){jn(this);const{view:t,buffer:n,blockLen:r}=this;e=fn(e);const o=e.length;for(let i=0;i<o;){const u=Math.min(r-this.pos,o-i);if(u===r){const a=vr(e);for(;r<=o-i;i+=r)this.process(a,i);continue}n.set(e.subarray(i,i+u),this.pos),this.pos+=u,i+=u,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){jn(this),Qu(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let h=i;h<r;h++)t[h]=0;sl(n,r-8,BigInt(this.length*8),o),this.process(n,0);const u=vr(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)u.setUint32(4*h,d[h],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:u}=this;return e.length=r,e.pos=u,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}},ll=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Et=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),St=new Uint32Array(64),fl=class extends ul{constructor(){super(64,32,8,!1),this.A=Et[0]|0,this.B=Et[1]|0,this.C=Et[2]|0,this.D=Et[3]|0,this.E=Et[4]|0,this.F=Et[5]|0,this.G=Et[6]|0,this.H=Et[7]|0}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:u,H:a}=this;return[e,t,n,r,o,i,u,a]}set(e,t,n,r,o,i,u,a){this.A=e|0,this.B=t|0,this.C=n|0,this.D=r|0,this.E=o|0,this.F=i|0,this.G=u|0,this.H=a|0}process(e,t){for(let h=0;h<16;h++,t+=4)St[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const y=St[h-15],m=St[h-2],b=ot(y,7)^ot(y,18)^y>>>3,w=ot(m,17)^ot(m,19)^m>>>10;St[h]=w+St[h-7]+b+St[h-16]|0}let{A:n,B:r,C:o,D:i,E:u,F:a,G:l,H:d}=this;for(let h=0;h<64;h++){const y=ot(u,6)^ot(u,11)^ot(u,25),m=d+y+al(u,a,l)+ll[h]+St[h]|0,w=(ot(n,2)^ot(n,13)^ot(n,22))+cl(n,r,o)|0;d=l,l=a,a=u,u=i+m|0,i=o,o=r,r=n,n=m+w|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,u=u+this.E|0,a=a+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(n,r,o,i,u,a,l,d)}roundClean(){St.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},dl=tl(()=>new fl),on=e=>he.Buffer.from(e).toString("hex"),hl=(e=on(hr.utils.randomPrivateKey()))=>({getPrivateKey:()=>e,x25519:{getPublicKey:()=>on(hr.getPublicKey(e)),calculateSharedSecret:(o,i)=>{try{const u=hr.getSharedSecret(e,o),a=il(dl,u,he.Buffer.from(i,"utf-8"),"RCfM",32);return z(on(a))}catch(u){return H(u)}}},ed25519:{getPublicKey:()=>on(Lo.getPublicKey(e)),sign:o=>{try{return z(on(Lo.sign(o,e)))}catch(i){return H(i)}}}}),pl=e=>{const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;++r)n[r]=e[r];return t},ml=e=>new Uint8Array(pl(e)),yl=e=>{try{return z(Iu.blake2bHex(ml(e),void 0,32)).map(t=>he.Buffer.from(t,"hex"))}catch(t){return H(t)}},Es=D({address:O(),label:O(),appearanceId:Xe()}),Qt=D({publicKey:O(),signature:O(),curve:be([W("curve25519"),W("secp256k1")])}),Ss=D({accountAddress:O(),proof:Qt}),gl=D({identityAddress:O(),proof:Qt}),bl=D({challenge:O(),identityAddress:F(O()),accountAddresses:F(Te(O()))}),wl=D({challenge:O(),proofs:Te(be([Ss,gl]))}),pn=D({identityAddress:O(),label:O()}),Ko={western:"western",eastern:"eastern"},vl=be([W(Ko.eastern),W(Ko.western)]),Ts=D({variant:vl,familyName:O(),nickname:O(),givenNames:O()}),ut=D({quantifier:be([W("exactly"),W("atLeast")]),quantity:ro(Xe(),bs(0,"The number must be at least 0."))}),Dr=D({challenge:F(O()),numberOfAccounts:ut}),Or=ro(D({accounts:Te(Es),challenge:F(O()),proofs:F(Te(Ss))}),to(e=>{var t;return e.challenge||e!=null&&e.proofs?!!(e.challenge&&((t=e==null?void 0:e.proofs)!=null&&t.length)):!0},"missing challenge or proofs")),zn=D({isRequestingName:F(xe()),numberOfRequestedEmailAddresses:F(ut),numberOfRequestedPhoneNumbers:F(ut)}),Lr=D({name:F(Ts),emailAddresses:F(Te(O())),phoneNumbers:F(Te(O()))}),xl=D({accounts:xe(),personaData:xe()});ro(D({persona:pn,challenge:F(O()),proof:F(Qt)}),to(e=>e.challenge||e.proof?!!(e.challenge&&e.proof):!0,"missing challenge or proof"));var Il=D({discriminator:W("unauthorizedRequest"),oneTimeAccounts:F(Dr),oneTimePersonaData:F(zn)}),Al=D({discriminator:W("usePersona"),identityAddress:O()}),El=D({discriminator:W("loginWithoutChallenge")}),Sl=D({discriminator:W("loginWithChallenge"),challenge:O()}),Tl=be([El,Sl]),Bl=be([Al,Tl]),_l=D({discriminator:W("authorizedRequest"),auth:Bl,reset:F(xl),proofOfOwnership:F(bl),oneTimeAccounts:F(Dr),ongoingAccounts:F(Dr),oneTimePersonaData:F(zn),ongoingPersonaData:F(zn)}),Rl=be([Il,_l]),Cl=D({transactionManifest:O(),version:Xe(),blobs:F(Te(O())),message:F(O())}),Pl=D({discriminator:W("transaction"),send:Cl}),kl=D({transactionIntentHash:O()}),ql=D({discriminator:W("transaction"),send:kl}),Ml=D({discriminator:W("cancelRequest")}),Ul=D({discriminator:W("expireAtTime"),unixTimestampSeconds:Xe()}),Dl=D({discriminator:W("expireAfterDelay"),expireAfterSeconds:Xe()}),Ol=D({discriminator:W("subintent"),version:Xe(),manifestVersion:Xe(),subintentManifest:O(),blobs:F(Te(O())),message:F(O()),expiration:be([Ul,Dl])}),Ll=D({expirationTimestamp:Xe(),subintentHash:O(),signedPartialTransaction:O()}),Fl=D({discriminator:W("preAuthorizationRequest"),request:F(Ol)}),Nl=be([Rl,Pl,Ml,Fl]),lo=D({version:W(2),networkId:Xe(),dAppDefinitionAddress:O(),origin:O()}),$l=D({interactionId:O(),metadata:lo,items:Nl}),Wl=D({discriminator:W("unauthorizedRequest"),oneTimeAccounts:F(Or),oneTimePersonaData:F(Lr)}),jl=D({discriminator:W("loginWithoutChallenge"),persona:pn}),zl=D({discriminator:W("loginWithChallenge"),persona:pn,challenge:O(),proof:Qt}),Hl=D({discriminator:W("preAuthorizationResponse"),response:F(Ll)}),Vl=be([jl,zl]),Gl=D({discriminator:W("usePersona"),persona:pn}),Zl=be([Gl,Vl]),Kl=D({discriminator:W("authorizedRequest"),auth:Zl,proofOfOwnership:F(wl),oneTimeAccounts:F(Or),ongoingAccounts:F(Or),oneTimePersonaData:F(Lr),ongoingPersonaData:F(Lr)}),Yl=be([Wl,Kl]),Xl=be([Yl,ql,Hl]),Jl=D({discriminator:W("success"),interactionId:O(),items:Xl}),Ql=D({discriminator:W("failure"),interactionId:O(),error:O(),message:F(O())}),Bs=be([Jl,Ql]),Jn={extensionStatus:"extensionStatus",openPopup:"openPopup",cancelWalletInteraction:"cancelWalletInteraction",walletInteraction:"walletInteraction"},ef=D({interactionId:O(),discriminator:W(Jn.extensionStatus)}),tf=D({interactionId:O(),discriminator:W(Jn.openPopup)}),nf=D({interactionId:O(),discriminator:W(Jn.walletInteraction),interaction:$l,sessionId:F(O())}),rf=D({interactionId:O(),discriminator:W(Jn.cancelWalletInteraction),metadata:lo});be([ef,tf,nf,rf]);var Vt={extensionStatus:"extensionStatus",receivedByExtension:"receivedByExtension",receivedByWallet:"receivedByWallet",requestCancelSuccess:"requestCancelSuccess",requestCancelFail:"requestCancelFail"};D({eventType:W(Vt.extensionStatus),interactionId:O(),isWalletLinked:xe(),isExtensionAvailable:xe(),canHandleSessions:F(xe())});var of=D({eventType:be([W(Vt.extensionStatus),W(Vt.receivedByExtension),W(Vt.receivedByWallet),W(Vt.requestCancelSuccess),W(Vt.requestCancelFail)]),interactionId:O()});be([of,Bs]);var Bn={outgoingMessage:"radix#chromeExtension#send",incomingMessage:"radix#chromeExtension#receive"},_s=W("offer"),Rs=W("answer"),Cs=W("iceCandidate"),Ps=W("iceCandidates");be([_s,Rs,Cs,Ps]);var sf=be([W("wallet"),W("extension")]),Qn=D({requestId:O(),targetClientId:O(),encryptedPayload:O(),source:F(sf),connectionId:F(O())});D({...Qn.entries,method:Rs,payload:D({sdp:O()})});D({...Qn.entries,method:_s,payload:D({sdp:O()})});var ks=D({candidate:O(),sdpMid:O(),sdpMLineIndex:Xe()});D({...Qn.entries,method:Cs,payload:ks});D({...Qn.entries,method:Ps,payload:Te(ks)});D({numberOfAccounts:ut,withProof:F(xe()),reset:F(xe())});var af=()=>{let t=ye({numberOfAccounts:{quantifier:"atLeast",quantity:1}},()=>{});const a={atLeast:l=>(t=ye(t,d=>{d.numberOfAccounts.quantifier="atLeast",d.numberOfAccounts.quantity=l}),a),exactly:l=>(t=ye(t,d=>{d.numberOfAccounts.quantifier="exactly",d.numberOfAccounts.quantity=l}),a),withProof:(l=!0)=>(t=ye(t,d=>{d.withProof=l}),a),reset:(l=!0)=>(t=ye(t,d=>{d.reset=l}),a),_toObject:()=>({accounts:t})};return a};D({withProof:F(xe())});var cf=(e={withProof:!1})=>{let t=ye(e,()=>{});const o={withProof:(i=!0)=>(t=ye(t,u=>{u.withProof=i}),o),_toObject:()=>({persona:t})};return o};Fu(D({fullName:xe(),emailAddresses:ut,phoneNumbers:ut,reset:xe()}));var uf=(e={})=>{let t=ye(e,()=>{});const n=(d=!0)=>(t=ye(t,h=>{h.fullName=d}),l),r=d=>({atLeast:h=>(t=ye(t,y=>{y[d]={quantifier:"atLeast",quantity:h}}),l),exactly:h=>(t=ye(t,y=>{y[d]={quantifier:"exactly",quantity:h}}),l)}),l={fullName:n,emailAddresses:(d=!0)=>(r("emailAddresses").exactly(d?1:0),l),phoneNumbers:(d=!0)=>(r("phoneNumbers").exactly(d?1:0),l),reset:(d=!0)=>(t=ye(t,h=>{h.reset=d}),l),_toObject:()=>({personaData:t})};return l};D({accountAddresses:F(Te(O())),identityAddress:F(O())});var lf=e=>({_toObject:()=>({...e})}),qd={accounts:af,personaData:uf,persona:cf,config:lf},qs=(e,t)=>{const n=[null,void 0,!1,!0];if(n.includes(e)||n.includes(t)||typeof e=="number"||typeof t=="number")return Object.is(e,t);const r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(const i of r){const u=e[i],a=t[i],l=Yo(u)&&Yo(a);if(l&&!qs(u,a)||!l&&u!==a)return!1}return!0},Yo=e=>e!=null&&typeof e=="object",ff=(e,t)=>{var n,r,o,i,u,a,l,d,h,y,m;if(e.discriminator==="authorizedRequest"){const b=((n=e.reset)==null?void 0:n.accounts)||((r=e.reset)==null?void 0:r.personaData),w=!!(e.oneTimeAccounts||e.oneTimePersonaData),I=e.auth.discriminator==="loginWithChallenge"||!!((o=e.oneTimeAccounts)!=null&&o.challenge)||!!((i=e.ongoingAccounts)!=null&&i.challenge);if(b||w||I)return!1;let A=!1;if(e.ongoingAccounts){const{quantifier:v,quantity:S}=e.ongoingAccounts.numberOfAccounts;A=((l=(a=(u=t.sharedData)==null?void 0:u.ongoingAccounts)==null?void 0:a.numberOfAccounts)==null?void 0:l.quantifier)===v&&((y=(h=(d=t.sharedData)==null?void 0:d.ongoingAccounts)==null?void 0:h.numberOfAccounts)==null?void 0:y.quantity)===S}return e.ongoingPersonaData&&(A=qs(e.ongoingPersonaData,(m=t.sharedData)==null?void 0:m.ongoingPersonaData)),A}return!1};D({proofOfOwnership:F(D({challenge:F(O()),accountAddresses:F(Te(O())),identityAddress:F(O())})),accounts:F(D({numberOfAccounts:ut,reset:xe(),oneTime:xe(),challenge:F(O())})),personaData:F(D({fullName:F(xe()),phoneNumbers:F(ut),emailAddresses:F(ut),reset:xe(),oneTime:F(xe())})),persona:F(D({identityAddress:F(O()),label:F(O()),challenge:F(O())}))});var df=e=>{const{persona:t,accounts:n,personaData:r,proofOfOwnership:o}=e,i=!!t,u=(n==null?void 0:n.reset)||(r==null?void 0:r.reset),a=n&&!(n!=null&&n.oneTime),l=r&&!(r!=null&&r.oneTime);return!!(u||a||l||i||o)},hf=e=>{var t,n,r;return(t=e.persona)!=null&&t.challenge?{discriminator:"loginWithChallenge",challenge:e.persona.challenge}:(n=e.persona)!=null&&n.identityAddress?{discriminator:"usePersona",identityAddress:(r=e.persona)==null?void 0:r.identityAddress}:{discriminator:"loginWithoutChallenge"}},Ms=e=>t=>{var o,i;const n={...t},{accounts:r}=e;if(r){const u={challenge:r.challenge,numberOfAccounts:r.numberOfAccounts},a=n.discriminator==="authorizedRequest"&&!((o=e.accounts)!=null&&o.oneTime),l=n.discriminator==="authorizedRequest";(i=e.accounts)!=null&&i.oneTime?n.oneTimeAccounts=u:(a||l)&&(n.ongoingAccounts=u)}return n},Us=e=>t=>{const n={...t};if(e.proofOfOwnership){const{challenge:r,accountAddresses:o,identityAddress:i}=e.proofOfOwnership;r&&n.discriminator==="authorizedRequest"&&(n.proofOfOwnership={challenge:r},o&&(n.proofOfOwnership.accountAddresses=o),i&&(n.proofOfOwnership.identityAddress=i))}return n},Ds=e=>t=>{var r,o;const n={...t};if(e.personaData){const{fullName:i,phoneNumbers:u,emailAddresses:a}=e.personaData;(r=e.personaData)!=null&&r.oneTime&&(n.oneTimePersonaData={isRequestingName:i,numberOfRequestedPhoneNumbers:u,numberOfRequestedEmailAddresses:a});const l=n.discriminator==="authorizedRequest"&&!((o=e.personaData)!=null&&o.oneTime),d=n.discriminator==="authorizedRequest";(l||d)&&(n.ongoingPersonaData={isRequestingName:i,numberOfRequestedPhoneNumbers:u,numberOfRequestedEmailAddresses:a})}return n},pf=e=>t=>{const{accounts:n,personaData:r}=e;return{...t,reset:{accounts:!!(n!=null&&n.reset),personaData:!!(r!=null&&r.reset)}}},mf=e=>z({discriminator:"unauthorizedRequest"}).map(Ms(e)).map(Ds(e)).map(Us(e)),yf=e=>z({discriminator:"authorizedRequest",auth:hf(e)}).map(Ms(e)).map(Ds(e)).map(pf(e)).map(Us(e)),gf=(e,t)=>z(e?ye(t,n=>{n.accounts&&(n.accounts.oneTime=!1,n.accounts.reset=!1),n.personaData&&(n.personaData.oneTime=!1,n.personaData.reset=!1)}):t),bf=(e,t)=>gf(e,t).andThen(n=>df(n)?yf(n):mf(n)),wf=({dataRequestState:e,isConnect:t,challenge:n,oneTime:r,walletData:o})=>bf(t,ye({},i=>{var u;if(e.proofOfOwnership&&(i.proofOfOwnership={...e.proofOfOwnership,challenge:n}),e.accounts&&(i.accounts={numberOfAccounts:e.accounts.numberOfAccounts||{quantifier:"atLeast",quantity:1},oneTime:r,reset:!!e.accounts.reset,challenge:e.accounts.withProof?n:void 0}),e.personaData&&(i.personaData={...e.personaData,reset:!!e.personaData.reset,oneTime:r}),!r||e.proofOfOwnership){const a=o.persona;o.persona&&(i.persona=a),(u=e.persona)!=null&&u.withProof&&(i.persona={...i.persona??{},challenge:n}),Object.values(e).length===0&&(i.persona={challenge:void 0})}})),vf=(e,t)=>{const{items:n}=e;return n.discriminator==="authorizedRequest"?ye({},r=>{r.persona={proof:!1},n.auth.discriminator==="loginWithChallenge"&&(r.persona.proof=!!n.auth.challenge),n.ongoingAccounts&&(r.ongoingAccounts={proof:!!n.ongoingAccounts.challenge,numberOfAccounts:n.ongoingAccounts.numberOfAccounts}),n.ongoingPersonaData&&(r.ongoingPersonaData=n.ongoingPersonaData)}):t},xf=e=>ye({},t=>{e.ongoingAccounts&&(t.accounts={numberOfAccounts:e.ongoingAccounts.numberOfAccounts,withProof:e.ongoingAccounts.proof,reset:!0}),e.ongoingPersonaData&&(t.personaData={fullName:e.ongoingPersonaData.isRequestingName,phoneNumbers:e.ongoingPersonaData.numberOfRequestedPhoneNumbers,emailAddresses:e.ongoingPersonaData.numberOfRequestedEmailAddresses,reset:!1}),e.persona&&(t.persona={withProof:!1})}),Tt={persona:"persona",account:"account"},If=D({challenge:O(),proof:Qt,address:O(),type:W(Tt.persona)}),Af=D({challenge:O(),proof:Qt,address:O(),type:W(Tt.account)}),Ef=no("type",[If,Af]),Sf=D({entry:W("fullName"),fields:Ts}),Tf=D({entry:W("emailAddresses"),fields:Te(O())}),Bf=D({entry:W("phoneNumbers"),fields:Te(O())}),_f=no("entry",[Sf,Tf,Bf]);D({accounts:Te(Es),personaData:Te(_f),persona:F(pn),proofs:Te(Ef)});D({persona:F(D({proof:xe()})),ongoingAccounts:F(D({numberOfAccounts:F(ut),proof:xe()})),ongoingPersonaData:F(zn)});var Rf={accounts:[],personaData:[],proofs:[],persona:void 0},Cf=e=>{var m;(m=e==null?void 0:e.logger)==null||m.getSubLogger({name:"StateModule"});const t=e.providers.storageModule,n=new ze,r=b=>t.setState(b),o=()=>t.getState().orElse(()=>ge(u)).andThen(b=>z(b||u)),i=b=>o().andThen(w=>r({...w,...b})),u={walletData:Rf,loggedInTimestamp:"",sharedData:{}},a=()=>t.setState(u).map(()=>{h()});o().map(()=>h()).orElse(()=>a());const d=new Ie(void 0),h=()=>{t.getState().map(b=>{d.next(b==null?void 0:b.walletData)})},y=d.asObservable().pipe(ve(b=>!!b));return{setState:r,patchState:i,getState:o,walletData$:y,emitWalletData:h,getWalletData:()=>d.value,reset:a,storage$:t.storage$,destroy:()=>{n.unsubscribe()}}},Pf=e=>t=>{var r,o,i;let n=[];if(e.discriminator==="authorizedRequest"){const u=((r=e.oneTimeAccounts)==null?void 0:r.accounts)??[],a=((o=e.ongoingAccounts)==null?void 0:o.accounts)??[];n=[...u,...a]}else e.discriminator==="unauthorizedRequest"&&(n=((i=e.oneTimeAccounts)==null?void 0:i.accounts)??[]);return ye(t,u=>{u.accounts=n})},Ir=e=>{const t=[];return e.name&&t.push({entry:"fullName",fields:e.name}),e.emailAddresses&&t.push({entry:"emailAddresses",fields:e.emailAddresses}),e.phoneNumbers&&t.push({entry:"phoneNumbers",fields:e.phoneNumbers}),t},kf=(e,t)=>t.map(n=>{const r="identityAddress"in n?Tt.persona:Tt.account,o="identityAddress"in n?n.identityAddress:n.accountAddress;return{type:r,challenge:e,address:o,proof:n.proof}}),qf=e=>t=>ye(t,n=>{e.discriminator==="authorizedRequest"?(e.oneTimePersonaData&&(n.personaData=Ir(e.oneTimePersonaData)),e.ongoingPersonaData&&(n.personaData=Ir(e.ongoingPersonaData))):e.discriminator==="unauthorizedRequest"&&e.oneTimePersonaData&&(n.personaData=Ir(e.oneTimePersonaData))}),Mf=e=>t=>ye(t,n=>{var r;e.discriminator==="authorizedRequest"&&(n.persona=(r=e.auth)==null?void 0:r.persona)}),Uf=e=>t=>ye(t,n=>{var r,o,i,u,a,l;if(n.proofs=[],e.discriminator==="authorizedRequest"){if(e.auth.discriminator==="loginWithChallenge"&&n.proofs.push({challenge:e.auth.challenge,proof:e.auth.proof,address:e.auth.persona.identityAddress,type:Tt.persona}),(r=e.ongoingAccounts)!=null&&r.challenge&&((o=e.ongoingAccounts.proofs)!=null&&o.length)){const d=e.ongoingAccounts.challenge,h=e.ongoingAccounts.proofs.map(({accountAddress:y,proof:m})=>({proof:m,address:y,challenge:d,type:Tt.account}));n.proofs.push(...h)}if((i=e.oneTimeAccounts)!=null&&i.challenge&&((u=e.oneTimeAccounts.proofs)!=null&&u.length)){const d=e.oneTimeAccounts.challenge,h=e.oneTimeAccounts.proofs.map(({accountAddress:y,proof:m})=>({proof:m,address:y,challenge:d,type:Tt.account}));n.proofs.push(...h)}e.proofOfOwnership&&n.proofs.push(...kf(e.proofOfOwnership.challenge,e.proofOfOwnership.proofs))}if(e.discriminator==="unauthorizedRequest"&&(a=e.oneTimeAccounts)!=null&&a.challenge&&(l=e.oneTimeAccounts.proofs)!=null&&l.length){const d=e.oneTimeAccounts.challenge,h=e.oneTimeAccounts.proofs.map(({accountAddress:y,proof:m})=>({proof:m,address:y,challenge:d,type:Tt.account}));n.proofs.push(...h)}}),Df=e=>ge({accounts:[],personaData:[],proofs:[],persona:void 0}).map(Pf(e)).map(qf(e)).map(Mf(e)).map(Uf(e)),Of=e=>{var i,u;const t=e.accounts??[],n=((i=e==null?void 0:e.persona)==null?void 0:i.label)??"",r=!!(e!=null&&e.persona),o=(u=e==null?void 0:e.personaData)==null?void 0:u.map(a=>{if(a.entry==="fullName"){const{variant:l,givenNames:d,familyName:h,nickname:y}=a.fields;return{value:l==="western"?`${d}${y?` "${y}" `:" "}${h}`:`${h}${y?` "${y}" `:" "}${d}`,field:"fullName"}}else{if(a.entry==="emailAddresses")return{value:a.fields[0],field:"emailAddress"};if(a.entry==="phoneNumbers")return{value:a.fields[0],field:"phoneNumber"}}}).filter(a=>{var l;return!!a&&!!((l=a.value)!=null&&l.trim())});return{accounts:t,personaLabel:n,connected:r,personaData:o}},Lf=e=>{const t=new Ie(e),n=()=>t.next(e),r=d=>t.next(d),o=()=>t.getValue(),i=(...d)=>d.filter(h=>typeof h._toObject=="function").reduce((h,y)=>({...h,...y._toObject()}),{});return{reset:n,setState:(...d)=>{d.length===0?n():r(i(...d))},getState:o,patchState:(...d)=>{d.length!==0&&r({...o(),...i(...d)})},removeState:(...d)=>{r(ye(o(),h=>{d.forEach(y=>{delete h[y]})}))},toDataRequestState:i,state$:t.asObservable()}},Ff=({interactionId:e,dAppDefinitionAddress:t,origin:n,logger:r})=>{const o="C",i=he.Buffer.from("C","ascii"),u=t.length,a=he.Buffer.from(u.toString(16),"hex"),l=he.Buffer.from(t,"utf-8"),d=he.Buffer.from(n,"utf-8"),h=he.Buffer.from(e,"utf-8"),y=he.Buffer.concat([i,h,a,l,d]);return yl(y).map(b=>(r==null||r.debug({method:"createSignatureMessage",messagePartsRaw:[o,e,u,t,n],messageParts:[i.toString("hex"),h.toString("hex"),a.toString("hex"),l.toString("hex"),d.toString("hex")],message:y.toString("hex"),blake2bHash:b.toString("hex")}),he.Buffer.from(b).toString("hex"))).mapErr(b=>({reason:"couldNotHashMessage",jsError:b}))},Nf=e=>{const{storageModule:t,KeyPairModule:n}=e.providers,r=d=>z(n(d)),o=d=>t.getItemById(d).andThen(h=>h?r(h.secret):ge(void 0)),i=d=>z(n()).asyncAndThen(h=>t.setItems({[d]:{secret:h.getPrivateKey(),createdAt:Date.now()}}).map(()=>h)),u=d=>o(d).andThen(h=>h?ge(h):i(d)).mapErr(h=>({reason:"couldNotGetOrCreateIdentity",jsError:h}));return{get:d=>u(d),deriveSharedSecret:(d,h)=>o(d).mapErr(()=>({reason:"couldNotDeriveSharedSecret"})).andThen(y=>y?y.x25519.calculateSharedSecret(h,e.dAppDefinitionAddress).mapErr(()=>({reason:"FailedToDeriveSharedSecret"})):H({reason:"DappIdentityNotFound"})),createSignature:({kind:d,interactionId:h,dAppDefinitionAddress:y,origin:m})=>u(d).andThen(b=>Ff({interactionId:h,dAppDefinitionAddress:y,origin:m,logger:e.logger}).andThen(w=>b.ed25519.sign(w).map(I=>({signature:I,publicKey:b.x25519.getPublicKey(),identity:b.ed25519.getPublicKey()})).mapErr(I=>({reason:"couldNotSignMessage",jsError:I}))))}},pt={fail:"fail",ignored:"ignored",pending:"pending",success:"success",timedOut:"timedOut",cancelled:"cancelled",pendingCommit:"pendingCommit"},Pn={rejectedByUser:"rejectedByUser",missingExtension:"missingExtension",canceledByUser:"canceledByUser",walletRequestValidation:"walletRequestValidation",walletResponseValidation:"walletResponseValidation",wrongNetwork:"wrongNetwork",failedToPrepareTransaction:"failedToPrepareTransaction",failedToCompileTransaction:"failedToCompileTransaction",failedToSignTransaction:"failedToSignTransaction",failedToSubmitTransaction:"failedToSubmitTransaction",failedToPollSubmittedTransaction:"failedToPollSubmittedTransaction",submittedTransactionWasDuplicate:"submittedTransactionWasDuplicate",submittedTransactionHasFailedTransactionStatus:"submittedTransactionHasFailedTransactionStatus",submittedTransactionHasRejectedTransactionStatus:"submittedTransactionHasRejectedTransactionStatus",failedToFindAccountWithEnoughFundsToLockFee:"failedToFindAccountWithEnoughFundsToLockFee",wrongAccountType:"wrongAccountType",unknownWebsite:"unknownWebsite",radixJsonNotFound:"radixJsonNotFound",unknownDappDefinitionAddress:"unknownDappDefinitionAddress",invalidPersona:"invalidPersona"},$f=new Map().set(Pn.missingExtension,"extension could not be found").set(Pn.rejectedByUser,"user rejected request").set(Pn.canceledByUser,"user has canceled the request"),ee=(e,t,n,r)=>({error:e,interactionId:t,message:n||$f.get(e)||"",jsError:r}),Wf=e=>{var I;const t=(I=e==null?void 0:e.logger)==null?void 0:I.getSubLogger({name:"RequestItemModule"}),n=new ze,r=e.providers.storageModule,o=new Map,i=({type:A,walletInteraction:v,isOneTimeRequest:S})=>({type:A,status:"pending",createdAt:Date.now(),interactionId:v.interactionId,showCancel:!0,walletInteraction:v,isOneTimeRequest:S}),u=(A,v)=>{const S=i(A);return t==null||t.debug({method:"addRequestItem",item:S}),v&&o.set(S.interactionId,v),r.setItems({[S.interactionId]:S}).map(()=>S)},a=A=>{if(o.has(A)){const v=o.get(A);return o.delete(A),v}},l=(A,v)=>(t==null||t.debug({method:"patchRequestItemStatus",item:{id:A,...v}}),r.patchItem(A,v)),d=A=>(t==null||t.debug({method:"cancelRequestItem",id:A}),l(A,{status:"fail",error:Pn.canceledByUser})),h=A=>[pt.pending,pt.pendingCommit].includes(A),y=({id:A,status:v,error:S,transactionIntentHash:B,metadata:C={},walletData:x,walletResponse:_})=>r.getItemById(A).mapErr(()=>({reason:"couldNotReadFromStore"})).andThen(P=>{if(P){if(v===pt.ignored&&o.has(A)&&o.delete(A),v===pt.success){const R=a(A);R==null||R(C==null?void 0:C.parentTransactionIntentHash)}const q={...P,walletData:x,transactionIntentHash:B,error:S,walletResponse:_,status:P.status===pt.ignored?P.status:v,metadata:P.metadata?{...P.metadata,...C}:C};return h(q.status)||delete q.walletInteraction,t==null||t.debug({method:"updateRequestItemStatus",updated:q}),r.setItems({[A]:q}).mapErr(()=>({reason:"couldNotWriteToStore"}))}return mt({reason:"itemNotFound"})}),m=()=>r.getItemList().map(A=>A.filter(v=>v.status===pt.pendingCommit)),b=()=>r.getItemList().map(A=>A.filter(v=>v.status==="pending")),w=r.storage$.pipe(Ye(()=>r.getItemList()),de(A=>{if(A.isOk())return A.value}),ve(A=>!!A));return{add:u,cancel:d,updateStatus:y,patch:l,getAndRemoveSignal:a,getById:A=>r.getItemById(A),getPendingCommit:m,getPending:b,requests$:w,clear:r.clear,destroy:()=>{n.unsubscribe()}}},jf=e=>{const t=e.providers.storageModule,n=()=>t.getItemList().mapErr(a=>({reason:"couldNotReadSessionFromStore",jsError:a})).map(a=>a[0]),r=a=>t.getItemById(a).mapErr(l=>({reason:"couldNotGetSessionById",jsError:l})),o=()=>{const a=ln(),l={sessionId:a,createdAt:Date.now()};return t.setItems({[a]:l}).map(()=>l).mapErr(d=>({reason:"couldNotCreateSession",jsError:d}))};return{getCurrentSession:()=>n().andThen(a=>a?ge(a):o()),getSession:n,store:t,getSessionById:r,patchSession:(a,l)=>t.patchItem(a,l).mapErr(d=>({reason:"couldNotPatchSession",jsError:d}))}},zf=()=>({outgoingMessageSubject:new pe,incomingMessageSubject:new pe,responseSubject:new pe,messageLifeCycleEventSubject:new pe}),Xo=({maxDelayTime:e=1e4,multiplier:t=2,timeout:n,interval:r=2e3}={})=>{const o=new pe,i=new pe;let u=0;const a=Ze(Mt(0),o.pipe(de(()=>(u=u+1,u)))).pipe(Ye(d=>{const h=d*r*t,y=h>e?e:h;return an(y).pipe(de(()=>z(d)))})),l=Ze(i.asObservable().pipe(de(()=>H({error:"stopped"}))),n?Ze(a,an(n).pipe(de(()=>H({error:"timeout"})))):a);return{trigger:o,withBackoff$:l,stop:()=>i.next()}},Pt=e=>{try{return z(JSON.parse(e))}catch(t){return H(t)}},Os=e=>e,Hf=e=>j.fromPromise(e,Os).mapErr(t=>({reason:"FailedToFetch",error:t,status:0})),Ls=e=>Hf(e).andThen(t=>j.fromPromise(t.text(),Os).andThen(n=>n?Pt(n):ge(n)).mapErr(n=>({status:t.status,reason:"FailedToParseResponseToJson",error:n})).andThen(n=>t.ok?ge({status:t.status,data:n}):mt({status:t.status,reason:"RequestStatusNotOk",data:n}))),Ar=e=>{try{return z(JSON.stringify(e))}catch(t){return H(t)}},st=e=>e,Vf=e=>j.fromPromise(Ut(e),t=>t).andThen(t=>t),Gf=e=>Ot.fromThrowable(n=>ws(Bs,n),n=>n)(e).mapErr(n=>ee("walletResponseValidation",e==null?void 0:e.interactionId,"Invalid input",n)),Zf=e=>typeof e=="string"&&/^[0-9a-f]{64}$/i.test(e),Kf=e=>{var b;let t=!1;const n=(b=e==null?void 0:e.logger)==null?void 0:b.getSubLogger({name:"ConnectorExtensionModule"}),r=(e==null?void 0:e.subjects)??zf(),o=new ze,i=(e==null?void 0:e.extensionDetectionTime)??200,u=e.providers.requestResolverModule,a=e.providers.storageModule.getPartition("connectorExtension");o.add(r.incomingMessageSubject.pipe(Z(w=>{n==null||n.debug({method:"incomingMessageSubject",message:w}),"eventType"in w?r.messageLifeCycleEventSubject.next(w):r.responseSubject.next(w)})).subscribe()),o.add(r.responseSubject.pipe(yt(w=>Un(u.addWalletResponses([w])))).subscribe()),o.add(r.outgoingMessageSubject.pipe(Z(w=>{n==null||n.debug({method:"outgoingMessageSubject",payload:w}),e.providers.environmentModule.globalThis.dispatchEvent(new CustomEvent(Bn.outgoingMessage,{detail:w}))})).subscribe());const l=w=>t?a.getState().andThen(I=>{const A=w.items.discriminator==="authorizedRequest",v=A?(I==null?void 0:I.sessionId)||ln():I==null?void 0:I.sessionId,S={interactionId:w.interactionId,interaction:w,sessionId:v,discriminator:"walletInteraction"};return A?a.setState({sessionId:v}).map(()=>S):ge(S)}):ge(w),d=w=>{const I=w.detail;r.incomingMessageSubject.next(I)};addEventListener(Bn.incomingMessage,d);const h=(w,I)=>{const A=new pe,v=Un(u.getWalletResponseById(w.interactionId)).pipe(ve(U=>U.isOk()&&!!U.value)),S=r.responseSubject.pipe(ve(U=>U.interactionId===w.interactionId),de(U=>z(U))),B=r.messageLifeCycleEventSubject.pipe(ve(({interactionId:U,eventType:V})=>w.interactionId===U&&["requestCancelSuccess","requestCancelFail"].includes(V)),de(U=>{const V=ee("canceledByUser",U.interactionId);return n==null||n.debug(" walletRequestCanceled",V),U})),C=()=>(r.outgoingMessageSubject.next({interactionId:w.interactionId,metadata:w.metadata,...t?{discriminator:"cancelWalletInteraction"}:{items:{discriminator:"cancelRequest"}}}),setTimeout(()=>{A.next(H(ee("canceledByUser",w.interactionId)))}),j.fromSafePromise(Ut(Ze(S.pipe(de(()=>"requestCancelFail")),B.pipe(de(({eventType:U})=>U))))));I.requestControl&&I.requestControl({cancelRequest:()=>C().andThen(U=>U==="requestCancelSuccess"?z("requestCancelSuccess"):H("requestCancelFail")),getRequest:()=>w});const x=Ze(v,S,A).pipe(Dn()),_=r.messageLifeCycleEventSubject.pipe(ve(({interactionId:U})=>w.interactionId===U),Z(U=>{I.eventCallback&&I.eventCallback(U.eventType)}),ic(S),Ti()),P=_.subscribe(),q=an(i).pipe(de(()=>H(ee("missingExtension",w.interactionId)))),R=Ze(q,_).pipe(Dn(),ve(U=>!("eventType"in U))),L=m.pipe(ve(U=>U.isExtensionAvailable),Ye(()=>Mt(l(w))),Z(U=>{U.map(V=>{r.outgoingMessageSubject.next(V)})}),ve(U=>!1));return Vf(Ze(x,R,L).pipe(Z(()=>{P.unsubscribe()})))},y=r.messageLifeCycleEventSubject.pipe(ve(w=>w.eventType==="extensionStatus")),m=Mt(!0).pipe(Z(()=>{r.outgoingMessageSubject.next({interactionId:ln(),discriminator:"extensionStatus"})}),Ye(()=>Za(y,Ze(y,an(i).pipe(de(()=>({eventType:"extensionStatus",isWalletLinked:!1,isExtensionAvailable:!1,canHandleSessions:!1})))))),Z(w=>{t=w.canHandleSessions||!1}),oc(1));return{id:"connector-extension",isSupported:()=>!e.providers.environmentModule.isMobile(),send:h,isAvailable$:m.pipe(de(({isExtensionAvailable:w})=>w)),isLinked$:m.pipe(de(({isWalletLinked:w})=>w)),showQrCode:()=>{e.providers.environmentModule.globalThis.dispatchEvent(new CustomEvent(Bn.outgoingMessage,{detail:{discriminator:"openPopup"}}))},disconnect:()=>{a.clear()},destroy:()=>{o.unsubscribe(),removeEventListener(Bn.incomingMessage,d)}}},Yf=e=>{var i;const{walletUrl:t}=e,n=(i=e==null?void 0:e.logger)==null?void 0:i.getSubLogger({name:"DeepLinkModule"}),r=e.providers.environmentModule.isTMA();return{deepLinkToWallet:u=>{var l;const a=new URL(t);if(Object.entries(u).forEach(([d,h])=>{a.searchParams.append(d,h)}),n==null||n.debug({method:"deepLinkToWallet",data:{...u}}),e.providers.environmentModule.isMobile()){const d=a.toString();return r?e.providers.environmentModule.globalThis.open(d,"_blank"):(l=e.providers.environmentModule.globalThis.location)!=null&&l.href&&(e.providers.environmentModule.globalThis.location.href=d),ge(void 0)}return mt(ee("UnhandledEnvironment",""))}}},Xf=e=>{let t=0,n=e.length;const r=i=>{if(i<0)return H(Error("'byteCount' must not be negative"));if(i===0)return z(he.Buffer.alloc(0));if(t+i>e.length)return H(Error("Out of buffer's boundary"));const u=he.Buffer.alloc(i);return e.copy(u,0,t,t+i),u.length!==i?H(Error("Incorrect length of newly read buffer...")):(t+=i,n-=i,z(u))},o=()=>n<0?H(Error("Incorrect implementation, read too many bytes.")):z(n===0);return{readNextBuffer:r,finishedParsing:o,remainingBytes:()=>o().andThen(i=>{if(i)return z(he.Buffer.alloc(0));const u=he.Buffer.alloc(n);return e.copy(u,0,t),z(u)})}},Jf=e=>Xf(e).readNextBuffer,Qf=e=>{const t=Jf(e),n=12,r=16;return Ot.combine([t(n),t(e.length-n-r),t(r)]).map(([o,i,u])=>({iv:o,ciphertext:i,authTag:u,combined:he.Buffer.concat([o,i,u]),ciphertextAndAuthTag:he.Buffer.concat([i,u])}))},ed=()=>{const e=(u,a,l)=>j.fromPromise(crypto.subtle.decrypt({name:"AES-GCM",iv:l},a,u),st).map(he.Buffer.from),t=(u,a,l)=>j.fromPromise(crypto.subtle.encrypt({name:"AES-GCM",iv:l},a,u),st).map(he.Buffer.from),n=u=>j.fromPromise(crypto.subtle.importKey("raw",u,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]),st),r=(u,a,l)=>n(a).andThen(d=>e(u,d,l)),o=(u,a,l=i())=>n(a).andThen(d=>t(u,d,l)).map(d=>({combined:he.Buffer.concat([l,d]),iv:l,ciphertext:d})),i=()=>he.Buffer.from(crypto.getRandomValues(new Uint8Array(12)));return{encrypt:o,decrypt:r,createIV:i}},td=e=>{var i;const t=e.baseUrl,n=(i=e.logger)==null?void 0:i.getSubLogger({name:"RadixConnectRelayApi"}),r=u=>(n==null||n.debug({method:`callApi.${u.method}`,body:u}),Ls(fetch(t,{method:"POST",body:JSON.stringify(u)})).map(a=>(n==null||n.debug({method:`callApi.${u.method}.success`,response:a}),a)).mapErr(a=>(n==null||n.debug({method:`callApi.${u.method}.error`,error:a}),ee("RadixConnectRelayRequestFailed",u.interactionId??""))));return{getResponses:u=>r({method:"getResponses",sessionId:u}).map(a=>a.data)}},nd=e=>Ku.encode(Buffer.from(JSON.stringify(e))),rd=e=>{var B;const t=(B=e.logger)==null?void 0:B.getSubLogger({name:"RadixConnectRelayModule"}),{baseUrl:n,providers:r,walletUrl:o}=e,{storageModule:i,requestResolverModule:u}=r,a=(r==null?void 0:r.encryptionModule)??ed(),l=(r==null?void 0:r.deepLinkModule)??Yf({logger:t,walletUrl:o,providers:{environmentModule:e.providers.environmentModule}}),d=(r==null?void 0:r.identityModule)??Nf({logger:t,dAppDefinitionAddress:e.dAppDefinitionAddress,providers:{storageModule:i.getPartition("identities"),KeyPairModule:hl}}),h=(r==null?void 0:r.sessionModule)??jf({providers:{storageModule:i.getPartition("sessions")}}),y=td({baseUrl:`${n}/api/v1`,logger:t}),m=new ze,b=(C=1500)=>new Promise(x=>setTimeout(x,C)),w=C=>"error"in C?mt({reason:C.error}):d.get("dApp").andThen(x=>x.x25519.calculateSharedSecret(C.publicKey,e.dAppDefinitionAddress).mapErr(()=>({reason:"FailedToDeriveSharedSecret"})).asyncAndThen(_=>S(_,C.data))),I=async()=>{await u.getPendingRequestIds().andThen(()=>h.getCurrentSession().map(C=>C.sessionId).andThen(y.getResponses).andThen(C=>j.combine(C.map(w))).andThen(u.addWalletResponses)),await b(),I()};e.providers.environmentModule.isMobile()&&I();const A=({session:C,walletInteraction:x,signature:_,publicKey:P,identity:q})=>u.getPendingRequestById(x.interactionId).andThen(()=>u.markRequestAsSent(x.interactionId)).andThen(()=>l.deepLinkToWallet({sessionId:C.sessionId,request:nd(x),signature:_,publicKey:P,identity:q,origin:x.metadata.origin,dAppDefinitionAddress:x.metadata.dAppDefinitionAddress})).mapErr(()=>ee("FailedToSendDappRequest",x.interactionId)),v=(C,x)=>j.combine([h.getCurrentSession().mapErr(_=>ee(_.reason,C.interactionId)),d.get("dApp").mapErr(_=>ee(_.reason,C.interactionId))]).andThen(([_,P])=>d.createSignature({dAppDefinitionAddress:C.metadata.dAppDefinitionAddress,interactionId:C.interactionId,origin:C.metadata.origin,kind:"dApp"}).mapErr(q=>ee(q.reason,C.interactionId)).andThen(({signature:q})=>A({session:_,walletInteraction:C,signature:q,identity:P.ed25519.getPublicKey(),publicKey:P.x25519.getPublicKey()})).andThen(()=>u.waitForWalletResponse(C.interactionId)).map(q=>q.walletResponse)),S=(C,x)=>Qf(Buffer.from(x,"hex")).asyncAndThen(({ciphertextAndAuthTag:_,iv:P})=>a.decrypt(_,Buffer.from(C,"hex"),P)).andThen(_=>Pt(_.toString("utf-8"))).mapErr(_=>({reason:"FailedToDecryptWalletResponseData",jsError:_}));return{id:"radix-connect-relay",isSupported:()=>e.providers.environmentModule.isMobile(),send:v,disconnect:()=>{},destroy:()=>{m.unsubscribe()}}},od=e=>{var y,m,b;const t={version:2,dAppDefinitionAddress:e.dAppDefinitionAddress,networkId:e.networkId,origin:e.origin||((m=(y=e.providers.environmentModule.globalThis)==null?void 0:y.location)==null?void 0:m.origin)||""},n=e.providers.interactionIdFactory??ln;ws(lo,t);const r=(b=e==null?void 0:e.logger)==null?void 0:b.getSubLogger({name:"WalletSdk"}),o=e.providers.transports,i=async w=>w,u=e.requestInterceptor??i;r==null||r.debug({metadata:t});const a=(w,I=n())=>({items:w,interactionId:I,metadata:t}),l=w=>j.fromPromise(u(w),I=>ee("requestInterceptorError",w.interactionId,I.message)),d=w=>{const I=o.find(A=>A.isSupported());return I?z(I):H({error:"SupportedTransportNotFound",interactionId:w,message:"No supported transport found"})};return{sendInteraction:({interactionId:w=ln(),items:I},A={})=>l({items:I,interactionId:w,metadata:t}).andThen(v=>d(v.interactionId).asyncAndThen(S=>S.send(v,A)).andThen(S=>S.discriminator==="failure"?mt(S):ge(S))),createWalletInteraction:a,getTransport:d}},id=e=>{var x;const{providers:n}=e,{requestItemModule:r,storageModule:o,resolvers:i}=n,u=(x=e.logger)==null?void 0:x.getSubLogger({name:"RequestResolverModule"});let a=!0;const l=o.getPartition("walletResponses"),d=()=>r.getPending().orElse(_=>(u==null||u.error({method:"getPendingRequests",error:_}),z([]))).andThen(_=>_.length===0?H("PendingItemsNotFound"):z(_)),h=_=>r.getById(_).mapErr(()=>ee("FailedToGetPendingItems",_)).andThen(P=>(P==null?void 0:P.status)==="pending"?z(P):H(ee("PendingItemNotFound",_))),y=_=>r.getById(_).mapErr(()=>ee("FailedToGetWalletResponse",_)).map(P=>P==null?void 0:P.walletResponse),m=_=>r.patch(_,{sentToWallet:!0}),b=_=>Ot.combine(_.map(Gf)).asyncAndThen(()=>l.setItems(_.reduce((P,q)=>(P[q.interactionId]=q,P),{}))).mapErr(P=>u==null?void 0:u.error({method:"addWalletResponses",error:P})),w=_=>_.reduce((P,q)=>({...P,[q.interactionId]:q}),{}),I=_=>{const P=Object.keys(_);return l.getItemList().map(q=>q.filter(R=>P.includes(R.interactionId))).andThen(q=>q.length?z(q):H("WalletResponsesNotFound")).map(q=>q.map(R=>({walletInteractionResponse:R,requestItem:_[R.interactionId]})))},A=_=>j.combine(_.map(S)).map(()=>_),v=_=>ge(void 0),S=({requestItem:_,walletInteractionResponse:P})=>{const{walletInteraction:q}=_;return j.combine(i.map(R=>R({walletInteraction:q,walletInteractionResponse:P,requestItem:_})))},B=_=>j.fromSafePromise(Ut(r.requests$.pipe(ve(P=>P.some(q=>q.interactionId===_&&q.status!=="pending")),de(P=>P.find(q=>q.interactionId===_))))),C=async()=>{await d().map(w).andThen(I).andThen(A).map(_=>_.map(P=>P.requestItem)).andThen(v),await new Promise(_=>setTimeout(_,1e3)),a&&C()};return C(),{waitForWalletResponse:B,getPendingRequestById:h,getPendingRequestIds:()=>d().map(_=>_.map(P=>P.interactionId)),markRequestAsSent:m,addWalletResponses:b,getWalletResponseById:y,destroy:()=>{a=!1}}},sd=e=>{if(e.discriminator==="success"&&(e.items.discriminator==="authorizedRequest"||e.items.discriminator==="unauthorizedRequest"))return e.items},ad=(e,t)=>n=>{const r=e();return r?r(n).map(()=>n).mapErr(o=>ee(o.error,t,o.message)):ge(n)},cd=({requestItem:e,walletInteraction:t,walletData:n,stateModule:r})=>r.getState().andThen(o=>r.setState({loggedInTimestamp:e.type==="loginRequest"?Date.now().toString():o.loggedInTimestamp,walletData:n,sharedData:vf(t,o.sharedData)}).andTee(()=>r.emitWalletData())).orElse(()=>H(ee("FailedToUpdateRdtState",t.interactionId))),ud=e=>({walletInteraction:t,walletInteractionResponse:n,requestItem:r})=>{const o=sd(n);if(!o)return ge(void 0);const{requestItemModule:i,getDataRequestController:u,stateModule:a}=e,{interactionId:l}=t;return Df(o).andThen(ad(u,l)).andThen(d=>o.discriminator==="authorizedRequest"?cd({requestItem:r,walletInteraction:t,walletData:d,stateModule:a}).map(()=>d):ge(d)).andThen(d=>i.updateStatus({id:t.interactionId,status:"success",walletData:d,walletResponse:n}).mapErr(h=>ee(h.reason,t.interactionId))).andTee(()=>e.updateConnectButtonStatus("success")).orElse(d=>(e.updateConnectButtonStatus("fail"),H(d))).map(()=>{})},ld=e=>{if(e.discriminator==="failure")return e},fd=e=>({walletInteraction:t,walletInteractionResponse:n})=>{if(!ld(n))return ge(void 0);const{interactionId:o}=t,{requestItemModule:i}=e;return i.updateStatus({id:o,status:"fail",walletResponse:n}).orElse(u=>(e.updateConnectButtonStatus("fail"),H(ee(u.reason,o)))).andTee(()=>e.updateConnectButtonStatus("fail")).map(()=>{})},Jo={Unknown:"Unknown",CommittedSuccess:"CommittedSuccess",CommittedFailure:"CommittedFailure",Pending:"Pending",Rejected:"Rejected"},Rt={Mainnet:1,Stokenet:2,Gilganet:32,Enkinet:33,Hammunet:34,Nergalnet:35,Mardunet:36,Dumunet:37},dd={Mainnet:{networkName:"Mainnet",networkId:Rt.Mainnet,gatewayUrl:"https://mainnet.radixdlt.com",dashboardUrl:"https://dashboard.radixdlt.com"},Stokenet:{networkName:"Stokenet",networkId:Rt.Stokenet,gatewayUrl:"https://babylon-stokenet-gateway.radixdlt.com",dashboardUrl:"https://stokenet-dashboard.radixdlt.com"},Mardunet:{networkName:"Mardunet",networkId:Rt.Mardunet,gatewayUrl:"https://mardunet-gateway.radixdlt.com",dashboardUrl:"https://mardunet-dashboard.rdx-works-main.extratools.works"},Gilganet:{networkName:"Gilganet",networkId:Rt.Gilganet,gatewayUrl:"https://gilganet-gateway.radixdlt.com",dashboardUrl:"https://gilganet-dashboard.rdx-works-main.extratools.works"},Enkinet:{networkName:"Enkinet",networkId:Rt.Enkinet,gatewayUrl:"https://enkinet-gateway.radixdlt.com",dashboardUrl:"https://enkinet-dashboard.rdx-works-main.extratools.works"},Hammunet:{networkName:"Hammunet",networkId:Rt.Hammunet,gatewayUrl:"https://hammunet-gateway.radixdlt.com",dashboardUrl:"https://hammunet-dashboard.rdx-works-main.extratools.works"},Dumunet:{networkName:"Dumunet",networkId:Rt.Dumunet,gatewayUrl:"https://dumunet-gateway.radixdlt.com",dashboardUrl:"https://dumunet-dashboard.rdx-works-main.extratools.works"}},Fs=Object.values(dd).reduce((e,t)=>(e[t.networkId]=t,e),{}),hd=({networkId:e,dAppDefinitionAddress:t,gatewayBaseUrl:n,applicationName:r,applicationVersion:o})=>({basePath:n??Fs[e].gatewayUrl,applicationName:r??"Unknown",applicationVersion:o??"Unknown",applicationDappDefinitionAddress:t}),pd="2.2.1",md=({basePath:e,applicationName:t,applicationVersion:n,applicationDappDefinitionAddress:r})=>{const o=(l,d)=>Ls(fetch(`${e}${l}`,{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json","RDX-Client-Name":"@radixdlt/radix-dapp-toolkit","RDX-Client-Version":pd,"RDX-App-Name":t,"RDX-App-Version":n,"RDX-App-Dapp-Definition":r}})).map(h=>h.data);return{getSubintentStatus:l=>o("/transaction/subintent-status",{subintent_hash:l}),getTransactionStatus:l=>o("/transaction/status",{intent_hash:l}),getEntityMetadataPage:l=>o("/state/entity/page/metadata",{address:l})}},yd=e=>{var u,a;const t=(u=e.logger)==null?void 0:u.getSubLogger({name:"GatewayModule"}),n=((a=e==null?void 0:e.providers)==null?void 0:a.gatewayApiService)??md(e.clientConfig),r=(l,d,h)=>j.fromPromise(Ut(h.withBackoff$.pipe(Ye(y=>y.isErr()?[H(ee("failedToPoll","",void 0,{error:y.error,context:"GatewayModule.poll.retry.withBackoff$",hash:l}))]:(t==null||t.debug(`Polling ${l} retry #${y.value+1}`),d().orElse(m=>m.reason==="FailedToFetch"?(t==null||t.debug({error:m,context:"unexpected error, retrying"}),h.trigger.next(),z(void 0)):(t==null||t.debug(m),H(ee("failedToPoll","",void 0,{error:m,hash:l,context:"GatewayModule.poll"})))))),ve(y=>y.isOk()&&!!y.value||y.isErr()),Dn())),y=>y).andThen(y=>y);return{pollSubintentStatus:(l,d)=>{const h=Xo({...e.retryConfig,maxDelayTime:6e4,timeout:new Date(d*1e3)});return{stop:h.stop,result:r(l,()=>n.getSubintentStatus(l).map(({subintent_status:y,finalized_at_transaction_intent_hash:m})=>{if(y==="CommittedSuccess")return{subintentStatus:y,transactionIntentHash:m};h.trigger.next()}),h)}},pollTransactionStatus:l=>{const d=Xo(e.retryConfig);return r(l,()=>n.getTransactionStatus(l).map(({status:h})=>{if(new Set(["CommittedSuccess","CommittedFailure","Rejected"]).has(h))return h;d.trigger.next()}),d)},gatewayApi:n,configuration:e.clientConfig}},gd=e=>{if(e.discriminator==="success"&&e.items.discriminator==="transaction")return e.items},bd=e=>[Jo.Rejected,Jo.CommittedFailure].includes(e),wd=e=>({walletInteraction:t,walletInteractionResponse:n})=>{const r=gd(n);if(!r)return ge(void 0);const{gatewayModule:o,requestItemModule:i,updateConnectButtonStatus:u}=e,{interactionId:a}=t,{send:{transactionIntentHash:l}}=r;return i.getById(a).mapErr(()=>ee("FailedToGetItemWithInteractionId",a)).andTee(()=>{var d;return(d=i.getAndRemoveSignal(a))==null?void 0:d(l)}).andThen(()=>o.pollTransactionStatus(l)).andThen(d=>{const y=bd(d)?"fail":"success";return i.updateStatus({id:a,status:y,transactionIntentHash:l,metadata:{transactionStatus:d},walletResponse:n}).orElse(m=>H(ee(m.reason,a))).andThen(()=>(u(y),ge(void 0))).orElse(m=>(u("fail"),H(m)))}).map(()=>{})},vd=e=>{if(e.discriminator==="success"&&e.items.discriminator==="preAuthorizationResponse")return e.items.response},xd=e=>({walletInteraction:t,walletInteractionResponse:n})=>{const r=vd(n);if(!r)return ge(void 0);const{signedPartialTransaction:o,expirationTimestamp:i,subintentHash:u}=r,{interactionId:a}=t,{requestItemModule:l}=e;return l.updateStatus({id:a,status:pt.pendingCommit,transactionIntentHash:u,walletResponse:n,metadata:{signedPartialTransaction:o,expirationTimestamp:i,subintentHash:u}}).orElse(d=>(e.updateConnectButtonStatus("fail"),H(ee(d.reason,a)))).andTee(()=>e.updateConnectButtonStatus("success")).map(()=>{})},Id=e=>{var l;(l=e==null?void 0:e.logger)==null||l.getSubLogger({name:"PreauthorizationPolling"});const{providers:{requestItemModule:t,ignoreTransactionSubject:n}}=e;let r=!0;const o=1e3,i=new Map,u=new ze;u.add(n.pipe(Z(d=>{var h;i.has(d)&&((h=i.get(d))==null||h.stop(),i.delete(d))})).subscribe());const a=async()=>{await t.getPendingCommit().andThen(d=>{const h=[],y=[];return d.forEach(m=>{var b;Number((b=m.metadata)==null?void 0:b.expirationTimestamp)*1e3<Date.now()?h.push(m):y.push(m)}),y.forEach(m=>{var b;if(!i.has(m.interactionId)){const w=e.providers.gatewayModule.pollSubintentStatus(m.transactionIntentHash,(b=m.metadata)==null?void 0:b.expirationTimestamp);i.set(m.interactionId,w),w.result.andTee(I=>t.updateStatus({id:m.interactionId,status:pt.success,metadata:{parentTransactionIntentHash:I.transactionIntentHash}})).mapErr(()=>{i.delete(m.interactionId)})}}),j.combine(h.map(m=>{var b;return i.has(m.interactionId)&&((b=i.get(m.interactionId))==null||b.stop(),i.delete(m.interactionId)),t.updateStatus({id:m.interactionId,status:pt.timedOut})}))}),await new Promise(d=>setTimeout(d,o)),r&&a()};return a(),{destroy:()=>{r=!1,u.unsubscribe()}}},Ad=e=>{var Me;const t=(Me=e.logger)==null?void 0:Me.getSubLogger({name:"WalletRequestModule"}),n=e.useCache,r=e.networkId,o=new pe,i=new pe,u=new pe,a=e.providers.gatewayModule,l=e.dAppDefinitionAddress,d=e.providers.stateModule,h=e.providers.storageModule,y=e.providers.dataRequestStateModule??Lf({}),m=e.providers.requestItemModule??Wf({logger:t,providers:{gatewayModule:a,storageModule:h.getPartition("requests")}}),b=e.providers.preauthorizationPollingModule??Id({logger:t,providers:{gatewayModule:a,requestItemModule:m,ignoreTransactionSubject:i}}),w=M=>{u.next(M)},I=e.providers.requestResolverModule??id({logger:t,providers:{storageModule:h,requestItemModule:m,resolvers:[wd({gatewayModule:a,requestItemModule:m,updateConnectButtonStatus:w}),xd({requestItemModule:m,updateConnectButtonStatus:w}),fd({requestItemModule:m,updateConnectButtonStatus:w}),ud({requestItemModule:m,getDataRequestController:()=>x,stateModule:d,updateConnectButtonStatus:w})]}}),A=e.providers.transports??[Kf({logger:t,providers:{storageModule:h,requestResolverModule:I,environmentModule:e.providers.environmentModule}}),rd({logger:t,walletUrl:"radixWallet://connect",baseUrl:"https://radix-connect-relay.radixdlt.com",dAppDefinitionAddress:e.dAppDefinitionAddress,providers:{storageModule:h,requestResolverModule:I,environmentModule:e.providers.environmentModule}})],v=e.providers.walletRequestSdk??od({logger:t,networkId:r,origin:e.origin,dAppDefinitionAddress:l,requestInterceptor:e.requestInterceptor,providers:{transports:A,environmentModule:e.providers.environmentModule}}),S=M=>{const k=new pe;return{eventCallback:X=>{k.next(X)},requestControl:({cancelRequest:X,getRequest:ke})=>{Ut(k.pipe(ve(oe=>oe==="receivedByWallet"),de(()=>ke()),Z(oe=>{["transaction","preAuthorizationRequest"].includes(oe.items.discriminator)&&m.patch(M,{showCancel:!1})}))),Ut(o.pipe(ve(oe=>oe===M),Ye(()=>m.cancel(M).andThen(()=>X())))),Ut(i.pipe(ve(oe=>oe===M),Ye(()=>m.updateStatus({id:M,status:"ignored"}).andThen(()=>X()))))}}};let B=()=>Promise.resolve(""),C,x;const _=M=>{var k,X;return((k=M.accounts)==null?void 0:k.withProof)||((X=M.persona)==null?void 0:X.withProof)||M.proofOfOwnership},P=M=>_(M)?j.fromPromise(B(),()=>ee("ChallengeGeneratorError","","failed to generate challenge")).andThen(k=>Zf(k)?z(k):H(ee("ChallengeValidationError","","challenge is invalid"))):ge(void 0),q=M=>{C=k=>M(k)},R=M=>{x=k=>j.fromPromise(M(k),()=>({error:"LoginRejectedByDapp",message:"Login rejected by dApp"}))},L=M=>(w("pending"),j.combine([v.sendInteraction(M,S(M.interactionId)),I.waitForWalletResponse(M.interactionId)]).map(([k,X])=>X)),U=(...M)=>ne({dataRequestState:y.toDataRequestState(...M),isConnect:!1,oneTime:!0}),V=M=>L(M).andThen(k=>(t==null||t.debug({method:"sendDataRequest.successResponse",response:k}),z(k.walletData))).mapErr(k=>(t==null||t.debug({method:"sendDataRequest.errorResponse",error:k}),k)),N=()=>d.getState().mapErr(()=>ee("FailedToReadRdtState","")),$=(M,k,X,ke)=>m.add({type:M,walletInteraction:k,isOneTimeRequest:X},ke).mapErr(({message:oe})=>ee("FailedToCreateRequestItem",k.interactionId,oe)),Y=M=>{var X;const k=v.createWalletInteraction({discriminator:"preAuthorizationRequest",request:M.toRequestItem()});return $("preAuthorizationRequest",k,!1,(X=M.getOnSubmittedSuccessFn)==null?void 0:X.call(M)).andThen(()=>L(k)).map(ke=>({...ke.metadata}))},ne=({isConnect:M,oneTime:k,dataRequestState:X})=>j.combine([P(X),N()]).andThen(([ke,oe])=>wf({dataRequestState:X,isConnect:M,oneTime:k,challenge:ke,walletData:oe.walletData}).mapErr(()=>ee("FailedToTransformWalletRequest","")).asyncAndThen(Be=>{const nt=v.createWalletInteraction(Be);if(ff(Be,oe)&&n)return ge(oe.walletData);const er=!oe.walletData.persona&&Be.discriminator==="authorizedRequest",en=Be.discriminator==="authorizedRequest"&&!!Be.proofOfOwnership;return $(er?"loginRequest":en?"proofRequest":"dataRequest",nt,k).andThen(()=>V(nt))})),ae=(...M)=>(y.setState(...M),{sendRequest:()=>ne({dataRequestState:y.getState(),isConnect:!1,oneTime:!1})}),ue=()=>d.getState().mapErr(M=>(t==null||t.error(M),{error:"FailedToReadRdtState",message:"failed to read rdt state",jsError:M})).andThen(M=>ne({dataRequestState:xf(M.sharedData),isConnect:!1,oneTime:!1})),ce=new ze,we=M=>(()=>{const X=v.createWalletInteraction({discriminator:"transaction",send:{blobs:M.blobs,transactionManifest:M.transactionManifest,message:M.message,version:M.version??1}});return m.add({type:"sendTransaction",walletInteraction:X,isOneTimeRequest:!1},M.onTransactionId).mapErr(()=>ee("FailedToAddRequestItem",X.interactionId)).map(()=>X)})().andThen(X=>L(X)).andThen(({status:X,transactionIntentHash:ke,metadata:oe,interactionId:Be})=>{const nt={transactionIntentHash:ke,status:oe.transactionStatus};return X==="success"?z(nt):H(ee(nt.status,Be))}),J=()=>A.find(M=>M.isSupported()),ie=()=>m.getPending(),Oe=M=>{o.next(M),m.cancel(M),u.next("fail"),w("fail")},Je=M=>{i.next(M),m.updateStatus({id:M,status:"ignored"}),u.next("fail")},Qe=M=>{B=M},et=()=>{m.getPending().map(M=>{M.forEach(k=>{k.showCancel&&o.next(k.interactionId)})}),d.reset(),m.clear(),A.forEach(M=>M==null?void 0:M.disconnect())},tt=()=>{var M;d.destroy(),m.destroy(),I.destroy(),b.destroy(),(M=e.providers.transports)==null||M.forEach(k=>k.destroy()),ce.unsubscribe()};return{sendRequest:M=>ne({isConnect:M.isConnect,oneTime:M.oneTime,dataRequestState:y.getState()}).andThen(k=>(C&&C(z(k)),z(k))).orElse(k=>(C&&C(H(k)),H(k))),sendTransaction:we,sendPreAuthorizationRequest:Y,cancelRequest:Oe,ignoreTransaction:Je,requestItemModule:m,provideChallengeGenerator:Qe,provideDataRequestControl:R,provideConnectResponseCallback:q,sendOneTimeRequest:U,setRequestDataState:ae,getPendingRequests:ie,getTransport:J,updateSharedAccounts:ue,dataRequestStateModule:y,interactionStatusChange$:u.asObservable(),requestItems$:m.requests$,disconnect:et,destroy:tt}},Ed=()=>({status$:Bt,onConnect$:Bt,onDisconnect$:Bt,onUpdateSharedAccounts$:Bt,onShowPopover$:Bt,onCancelRequestItem$:Bt,onLinkClick$:Bt,setStatus:()=>{},setMode:()=>{},setTheme:()=>{},setActiveTab:()=>{},setIsMobile:()=>{},setIsWalletLinked:()=>{},setIsExtensionAvailable:()=>{},setConnected:()=>{},setLoggedInTimestamp:()=>{},setRequestItems:()=>{},setAccounts:()=>{},setPersonaData:()=>{},setPersonaLabel:()=>{},setDappName:()=>{},destroy:()=>{},disconnect:()=>{}}),Sd=e=>{var C;if(!e.providers.environmentModule.isBrowser())return Ed();Xs(()=>import("./connect-button-CHA436HC-DVpi3LEs.js"),[]);const t=(C=e==null?void 0:e.logger)==null?void 0:C.getSubLogger({name:"ConnectButtonModule"}),n=e.subjects||Xu({providers:{environmentModule:e.providers.environmentModule}}),r=e.dAppDefinitionAddress,{baseUrl:o,accountsPath:i,transactionPath:u,subintentPath:a}=e.explorer??{baseUrl:Fs[e.networkId].dashboardUrl,transactionPath:"/transaction/",subintentPath:"/subintent/",accountsPath:"/account/"},l=e.providers.stateModule,d=e.providers.gatewayModule,h=e.providers.walletRequestModule,y=x=>{x()},m=e.onConnect||y,b=h.getTransport(),w=()=>document.querySelector("radix-connect-button"),I=new ze,A=We(e.providers.environmentModule.globalThis,"onConnectButtonRender");I.add(A.pipe(de(()=>w()),ve(x=>!!x),Ye(x=>{t==null||t.debug({observable:"onConnectButtonRender$"});const _=We(x,"onConnect").pipe(Z(()=>{m(k=>n.onConnect.next(k))})),P=We(x,"onDisconnect").pipe(Z(()=>n.onDisconnect.next())),q=We(x,"onLinkClick").pipe(Z(k=>{n.onLinkClick.next(k.detail)})),R=We(x,"onDestroy").pipe(de(()=>(t==null||t.debug({observable:"onDestroy$"}),!0))),L=We(x,"onCancelRequestItem").pipe(Z(k=>{const X=k.detail.id;t==null||t.debug({method:"onCancelRequestItem",id:X}),n.onCancelRequestItem.next(X)})),U=We(x,"onIgnoreTransactionItem").pipe(Z(k=>{const X=k.detail.id;t==null||t.debug({method:"onIgnoreTransactionItem",id:X}),n.onIgnoreTransactionItem.next(X)})),V=We(x,"onUpdateSharedAccounts").pipe(Z(()=>{t==null||t.debug("onUpdateSharedAccounts"),n.onUpdateSharedAccounts.next()})),N=We(x,"onShowPopover").pipe(Z(()=>n.onShowPopover.next())),$=n.isWalletLinked.pipe(Z(k=>x.isWalletLinked=k)),Y=n.isExtensionAvailable.pipe(Z(k=>x.isExtensionAvailable=k)),ne=n.status.pipe(Z(k=>x.status=k)),ae=n.mode.pipe(Z(k=>x.mode=k)),ue=n.connected.pipe(Z(k=>x.connected=k)),ce=n.isMobile.pipe(Z(k=>x.isMobile=k)),we=n.loggedInTimestamp.pipe(Z(k=>x.loggedInTimestamp=k)),J=n.activeTab.pipe(Z(k=>x.activeTab=k)),ie=n.requestItems.pipe(Z(k=>x.requestItems=k)),Oe=n.showPopoverMenu.pipe(Z(k=>{k?x.setAttribute("showPopoverMenu","true"):x.removeAttribute("showPopoverMenu")})),Je=n.accounts.pipe(Z(k=>x.accounts=k)),Qe=n.personaData.pipe(Z(k=>x.personaData=k)),et=n.personaLabel.pipe(Z(k=>x.personaLabel=k)),tt=n.dAppName.pipe(Z(k=>x.dAppName=k)),Me=n.theme.pipe(Z(k=>x.theme=k)),M=Ze(_,ne,Me,ae,ue,Oe,ie,we,ce,J,$,Y,P,L,U,Je,Qe,et,V,N,tt,q).pipe(de(()=>!1));return Ze(M,R).pipe(ve(k=>!!k),Dn(),rc(()=>{t==null||t.debug({observable:"onConnectButtonRender$.finalize"})}))})).subscribe()),I.add((b&&b.isAvailable$||Mt(!0)).pipe(Z(x=>n.isExtensionAvailable.next(x))).subscribe()),I.add((b&&b.isLinked$||Mt(!0)).pipe(Z(x=>n.isWalletLinked.next(x))).subscribe()),I.add(n.onLinkClick.pipe(Z(({type:x,data:_})=>{if(["account","transaction","subintent"].includes(x)){if(!o||!window)return;const P=`${o}${x==="transaction"?u:x==="subintent"?a:i}${_}`;window.open(P)}else x==="setupGuide"?window.open("https://wallet.radixdlt.com"):x==="getWallet"?window.open("https://app.radixdlt.com/qr-code"):x==="showQrCode"&&(b!=null&&b.showQrCode)&&b.showQrCode()})).subscribe());const v={status$:n.status.asObservable(),onConnect$:n.onConnect.asObservable(),onDisconnect$:n.onDisconnect.asObservable(),onShowPopover$:n.onShowPopover.asObservable(),onUpdateSharedAccounts$:n.onUpdateSharedAccounts.asObservable(),onCancelRequestItem$:n.onCancelRequestItem.asObservable(),onIgnoreTransactionItem$:n.onIgnoreTransactionItem.asObservable(),onLinkClick$:n.onLinkClick.asObservable(),setTheme:x=>n.theme.next(x),setMode:x=>n.mode.next(x),setActiveTab:x=>n.activeTab.next(x),setIsMobile:x=>n.isMobile.next(x),setIsWalletLinked:x=>n.isWalletLinked.next(x),setIsExtensionAvailable:x=>n.isExtensionAvailable.next(x),setLoggedInTimestamp:x=>n.loggedInTimestamp.next(x),setConnected:x=>n.connected.next(x),setShowPopoverMenu:x=>n.showPopoverMenu.next(x),setRequestItems:x=>n.requestItems.next(x),setAccounts:x=>n.accounts.next(x),setPersonaData:x=>n.personaData.next(x),setPersonaLabel:x=>n.personaLabel.next(x),setDappName:x=>n.dAppName.next(x),disconnect:()=>{n.connected.next(!1),n.status.next("default")},destroy:()=>{I.unsubscribe()}},S=()=>l.getState().map(x=>{const{personaData:_,accounts:P,personaLabel:q,connected:R}=Of(x.walletData);v.setLoggedInTimestamp(x.loggedInTimestamp),v.setAccounts(P),v.setPersonaData(_),v.setPersonaLabel(q),v.setConnected(R)});I.add(l.storage$.pipe(Ye(()=>S())).subscribe()),I.add(n.onCancelRequestItem.pipe(Z(x=>{h.cancelRequest(x)})).subscribe()),I.add(n.onIgnoreTransactionItem.pipe(Z(x=>{h.ignoreTransaction(x)})).subscribe()),I.add(h.requestItems$.pipe(Z(x=>{v.setRequestItems([...x].reverse())})).subscribe()),I.add(n.onShowPopover.pipe(Z(()=>{h.getPendingRequests().map(x=>{x.length>0&&n.activeTab.next("requests")})})).subscribe()),I.add(n.onConnect.pipe(Ye(()=>l.reset().andThen(()=>h.sendRequest({isConnect:!0,oneTime:!1})).map(()=>e.providers.environmentModule.isMobile()&&n.showPopoverMenu.next(!1)))).subscribe()),I.add(n.onUpdateSharedAccounts.pipe(Ye(()=>h.updateSharedAccounts())).subscribe()),I.add(n.onDisconnect.pipe(Z(()=>{n.connected.next(!1),n.status.next("default"),h.disconnect(),e.onDisconnect&&e.onDisconnect()})).subscribe());const B=()=>h.getPendingRequests().andTee(x=>n.status.next(x.length?"pending":"default"));return I.add(h.interactionStatusChange$.pipe(yt(x=>Mt(n.status.next(x==="success"?"success":x==="fail"?"error":"pending")).pipe(ec(2e3),Ya(()=>B())))).subscribe()),B(),r&&d.gatewayApi.getEntityMetadataPage(r).map(x=>{var _,P,q;return(q=(P=(_=x==null?void 0:x.items.find(R=>R.key==="name"))==null?void 0:_.value)==null?void 0:P.typed)==null?void 0:q.value}).map(x=>{n.dAppName.next(x??"Unnamed dApp")}),v},Td=()=>{const e=r=>{const o=r.toLowerCase();return/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard|ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(o)},t=()=>typeof navigator<"u"?navigator:void 0;return{get globalThis(){return globalThis},isMobile:r=>{var o;return e(r??((o=t())==null?void 0:o.userAgent)??"")},isTMA:()=>{var r,o;return Object.keys(((o=(r=globalThis==null?void 0:globalThis.Telegram)==null?void 0:r.WebView)==null?void 0:o.initParams)||{}).length>0},isBrowser:()=>![typeof window,typeof document].includes("undefined")}},Ns=(e,{providers:t})=>{const n=t.environmentModule.globalThis,r=()=>new Promise((v,S)=>{try{v(localStorage.getItem(e))}catch(B){S(B)}}),o=v=>new Promise((S,B)=>{try{localStorage.setItem(e,v),S()}catch(C){B(C)}}),i=()=>j.fromPromise(r(),st).andThen(v=>v?Pt(v):z({})),u=()=>j.fromPromise(r(),st).andThen(v=>v?Pt(v):z(void 0)),a=v=>j.fromPromise(r(),st).andThen(S=>S?Pt(S):z(void 0)).map(S=>S?S[v]:void 0),l=v=>i().andThen(S=>{const{[v]:B,...C}=S;return Ar(C).asyncAndThen(x=>j.fromPromise(o(x),st).map(()=>{n.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:JSON.stringify(S),newValue:x}))}))}),d=(v,S)=>a(v).andThen(B=>B?h({[v]:{...B,...S}}):H(new Error("Item not found"))),h=v=>i().andThen(S=>Ar({...S,...v}).asyncAndThen(B=>j.fromPromise(o(B),st).map(()=>{n.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:JSON.stringify(S),newValue:B}))}))),y=()=>i().map(Object.values),m=v=>u().andThen(S=>Ar({...S??{},...v}).asyncAndThen(B=>j.fromPromise(o(B),st).map(()=>{n.dispatchEvent(new StorageEvent("storage",{key:e,oldValue:JSON.stringify(S),newValue:B}))}))),b=v=>u().mapErr(()=>({reason:"FailedToReadFromLocalStorage"})).andThen(S=>S?m({...S,...v}).mapErr(()=>({reason:"FailedToWriteToLocalStorage"})):H({reason:"PatchingStateFailed"})),w=v=>Ns(`${e}:${v}`,{providers:t}),I=Ze(We(t.environmentModule.globalThis,"storage"),Mt({key:e,newValue:null,oldValue:null})).pipe(ve(v=>v.key===e),yt(v=>{const{key:S,newValue:B,oldValue:C}=v;if(!S)return[];const[x,_,P,q]=S.split(":");if(x==="rdt"&&_&&P){const R=C?Pt(C):z(void 0),L=B?Pt(B):z(void 0);return[Ot.combine([R,L]).map(([U,V])=>({key:S,partition:q,newValue:V,oldValue:U}))]}return[]}),ve(v=>v.isOk()),de(({value:v})=>v));return{getItems:i,getItemById:a,removeItemById:l,patchItem:d,setItems:h,getItemList:y,getPartition:w,setState:m,getState:u,patchState:b,clear:()=>j.fromPromise(new Promise(v=>v(localStorage.removeItem(e))),st),storage$:I}};Yu();var Md=e=>{const t=e.dAppDefinitionAddress??e.applicationDappDefinitionAddress,{networkId:n,providers:r,logger:o,onDisconnect:i,gatewayBaseUrl:u,applicationName:a,applicationVersion:l,useCache:d=!0}=e||{},h=(r==null?void 0:r.environmentModule)??Td(),y=(r==null?void 0:r.storageModule)??Ns(`rdt:${t}:${n}`,{providers:{environmentModule:h}}),m=(r==null?void 0:r.stateModule)??Cf({logger:o,providers:{storageModule:y.getPartition("state")}}),b=(r==null?void 0:r.gatewayModule)??yd({logger:o,clientConfig:hd({networkId:n,dAppDefinitionAddress:t,gatewayBaseUrl:u,applicationName:a,applicationVersion:l})}),w=(r==null?void 0:r.walletRequestModule)??Ad({logger:o,useCache:d,networkId:n,dAppDefinitionAddress:t,requestInterceptor:e.requestInterceptor,providers:{stateModule:m,storageModule:y,gatewayModule:b,environmentModule:h}}),I=(r==null?void 0:r.connectButtonModule)??Sd({logger:o,networkId:n,explorer:e.explorer,onDisconnect:i,dAppDefinitionAddress:t,providers:{stateModule:m,environmentModule:h,walletRequestModule:w,gatewayModule:b}});return{walletApi:{setRequestData:w.setRequestDataState,sendRequest:()=>w.sendRequest({isConnect:!1,oneTime:!1}),provideChallengeGenerator:A=>w.provideChallengeGenerator(A),dataRequestControl:A=>{w.provideDataRequestControl(A)},provideConnectResponseCallback:w.provideConnectResponseCallback,updateSharedAccounts:()=>w.updateSharedAccounts(),sendOneTimeRequest:w.sendOneTimeRequest,sendPreAuthorizationRequest:w.sendPreAuthorizationRequest,sendTransaction:A=>w.sendTransaction(A),walletData$:m.walletData$,getWalletData:m.getWalletData},buttonApi:{setTheme:I.setTheme,setMode:I.setMode,status$:I.status$},gatewayApi:{clientConfig:b.configuration},disconnect:()=>{w.disconnect(),I.disconnect(),i&&i()},destroy:()=>{m.destroy(),w.destroy(),I.destroy()}}};/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/export{qd as D,Md as R,Rt as a};
